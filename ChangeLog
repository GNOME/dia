1999-03-22  Alexander Larsson  <alla@lysator.liu.se>

	* app/render_eps.c (draw_image):
	Fixed exporting of images.
	Still not perfect, but not outright buggy.
	
1999-03-22  Alexander Larsson  <alla@lysator.liu.se>

	* configure.in:
	* po/hu.po:
	Added hungarian translation. By Shooby Ban <bansz@szif.hu>.

	* app/Makefile.am:
	Added $* to the dia call in run_dia.sh

1999-03-22  Lars Clausen  <lrclause@shasta.cs.uiuc.edu>
	
	* lib/color.[ch]:
	Added color_equals() call.

	* objects/standard/arc.c:
	* objects/standard/line.c:
	Don't save unneccesary data.
	
	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/image.c:
	* objects/standard/polyline.c:
	* objects/standard/zigzagline.c:
	Share properties dialog.
	Don't save unneccesary data.
	
1999-03-22  Seth Alves  <alves@hungry.com>

	* app/menus.c:
	* app/diagram.c:
	* app/display.c:
	small changes so that gnome menus aren't broken
	
1999-03-22  Alexander Larsson  <alla@lysator.liu.se>

	* po/da.po:
	Added danish translation from lrclause@cs.uiuc.edu.

	* po/POFILES.in:
	Updated file.

	* po/update_pofiles_in.sh:
	Added script that updates POFILES.in.
	This should probably be run automatically from somewhere.

1999-03-19  Alexander Larsson  <alla@lysator.liu.se>

	* app/diagram.[ch]:
	Added function diagram_update_menu_sensitivity() which
	sets the sensitivity of some menu items. This function
	is called at each diagram state change (from diagram_modified()).
	This is needed 	because otherwise the keyboard accelerators
	don't work correctly.

	* app/display.[ch]:
	Changed display_set_menu_sensitivity() to display_update_menu_state().
	Moved lots of code to diagram_update_menu_sensitivity() in
	diagram.c. Optimized to only look up menu-items from path:s once.
	
	* app/disp_callbacks.c:
	* app/interface.c:
	When we get a GDK_FOCUS_CHANGE, update menu sensitivity.
	Need to set GDK_FOCUS_CHANGE_MASK.
	
	* app/create_object.c:
	Call diagram_modified when an object has been created and
	selected so that the menu sensitivity is updated. 

	* app/menus.[ch]:
	removed menus_set_sensitive() and menus_set_state(). Exported
	renamed function menus_get_item_from_path().

1999-03-15  Alexander Larsson  <alla@lysator.liu.se>

	* app/disp_callbacks.c:
	Show (empty) object menus on object that has none.
	Show title on object menus.

	* app/display.c:
	Set zoom factor correctly when opening new displays.
	Better setting of scrollbars.

	* app/grid.c:
	* app/menus.h:
	Some reformating cleanup.

	* lib/diamenu.h:
	Added title to object menus.

	* objects/*/*.c:
	Added object menu method (NULL-valued) to all objects.

	* objects/standard/polyline.c:
	Added title to object menu.

1999-03-14  Alexander Larsson  <alla@lysator.liu.se>

	* app/preferences.[ch]:
	New files. Implements the preferences dialog and
	loading/saving of ~/.diarc.

	* app/Makefile.am:
	Added preferences.[ch].

	* app/app_procs.c:
	Load preferences on startup.

	* app/commands.[ch]:
	Added file_preferences_callback to show the preferences dialog.

	* app/create_object.c:
	Update extents when creating object.
	Use the reset_tools_after_create preferences setting.

	* app/display.c:
	Use preferences when creating new display.

	* app/menus.c:
	Add preferences to menu.

	* app/defaults.c:
	* app/layer_dialog.c:
	* app/properties.c:
	Don't allow shrinking of dialog.
	Add i18n of some strings.

1999-03-11  Kjartan Maraas  <kmaraas@fib.hl.no>
        * po/no.po:
	Norwegian translation added.
	
1999-03-11  Alexander Larsson  <alla@lysator.liu.se>

	* objects/standard/line.c: 
	* objects/standard/arc.c: 
	* objects/standard/polyline.c: 
	* objects/standard/zigzagline.c:
	Loading of arrow data fixed.

1999-03-09  Alexander Larsson  <alla@lysator.liu.se>

	* app/commands.c:
	Update extents when saving and exporting to postscript.
	Fixes a bug with postscript bounding-box being wrong.

	* app/defaults.c:
	Changed border width from 5 to 2.

	* app/group.c:
	Move grouped objects by the move-point of the first object.
	Fixes bug that made all objects in the group be off-grid
	when moving the group, even though all objects was on-grid.

	* app/layer_dialog.c:
	Update extents when changing layer.

1999-03-08  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>
 
       * objects/UML/uml.c: 
       * objects/UML/component.c: 
       * objects/UML/pixmaps/component.xpm: 
       Added the UML component object
	
1999-03-04  Seth Alves  <alves@hungry.com>

	* objects/UML/generalization.c (generalization_create): avoid
	math on uninitialized genlz->text_width (NaN causes sigfpe)
	
	* objects/UML/realizes.c (realizes_create): same

	* objects/UML/dependency.c (dependency_create): same

1999-03-01  Seth Alves  <alves@hungry.com>

	* app/display.c (ddisplay_active): don't fly a warning panel
	if ddisplay_active is called when no views are open.

	* app/commands.c (set_default_file_selection_directory): set
	file selector's default directory if there is already
	a document open.

1999-02-28  Alexander Larsson  <alla@lysator.liu.se>

	* INSTALL:
	New info about imlib requirements.

	* Configure.in:
	Added lib/pixmaps/Makefile to created makefiles.

	* app/app_procs.c:
	* app/commands.c:
	Change from obsoleted to newer gtk calls.
	
	* load_save.c:
	Pass filename of the diagram when loading and saving.
	This creates better oportunities to handle filename saving.

	* lib/object.h:
	Pass filenames to load and save methods.
	
	* lib/dia_image.[ch]:
	Added dia_image_get_broken() call that returns a image which
	is used for 'broken' images.
	
	* lib/pixmaps/.cvsignore:
	* lib/pixmaps/Makefile.am:
	* lib/pixmaps/broken.xpm:
	New files for the broken image bitmap.

	* lib/widgets.c:
	Fixed bug with double destroyed filedialog.

	* objects/*/*.c:
	Updated load and save prototypes to use the new filename argument.

	* objects/image.c:
	Render broken image instead of line when got no image.
	Use the new filename in load and save to save (if possible)
	relative pathnames and to better try to find loaded images.

1999-02-28  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Some updates to the todo file.
	
	* app/menus.c:
	* app/display.c:
	Place over/place over => sent to back/bring to front.
	Added some keyboard shortcuts to menus.
	
1999-02-28  Alexander Larsson  <alla@lysator.liu.se>

	* lib/dia_xml.c:
	Changed string saving/loading to a new method. This should
	be much better att handling &,<,> and whitespaces.
	Loading strings of the old kind is still supported for backwards
	compatibility.

	* samples/ER-demo.dia:
	* samples/UML-demo.dia:
	Updated to use the new strings.
	
	* app/load_save.c:
	statusbar modified update fix.

1999-02-27  Seth Alves  <alves@hungry.com>

	* app/app_procs.c (app_init): added a --export-to-ps option
	which will cause dia to load a dia file and save it as ps
	and then exit.  this is a little bogus, because it still
	pops up a window.  this option only shows up if --enable-gnome
	is used

	* app/display.c (display_set_menu_sensitivity): no Edit/Delete
	menu when built with --enable-gnome

	* app/interface.c (create_display_shell): build status bar
	even if --enable-gnome is used

	* app/menus.c: menu fixes for --enable-gnome

	* app/commands.c (file_open_dialog_ok_callback): fixed up
	menus when --enable-gnome is used
	(file_export_to_eps_callback): set a default file name
	when dialog is created

1999-02-27  Alexander Larsson  <alex@c125.ryd.student.liu.se>

	* objects/UML/association.c (association_create):
	Fixed usage of not initialized variable.
	Pointed out by Seth Alves <alves@hungry.com>.

1999-02-24  Alexander Larsson  <alex@c125.ryd.student.liu.se>

	* configure.in:
	Fixed detection of gnome-xml.
	From Valtteri Vuorikoski <vuori@k.notcom.org>.
	
	* app/app_procs.c:
	Fixed error detection on dlsym calls. 
	From Valtteri Vuorikoski <vuori@k.notcom.org>.

1999-02-23  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/message.c (fill_in_dialog):
	Fixed warnings.

1999-02-22  Lars Clausen  <lrclause@shasta.cs.uiuc.edu>

	* objects/standard/zigzagline.c:
	* objects/standard/polyline.c:
	* objects/standard/line.c:
	* objects/standard/arc.c:
	* lib/widgets.h:
	* lib/arrows.h:
	* lib/widgets.c:
	Support for sizeable arrows. 

	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/image.c:
	Changed creation handle to lower-right.
	Transparent box/ellipse.
	
	* objects/standard/image.c:
	Better layout of properties boxes.

1999-02-20  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>

	* objects/UML/message.c (fill_in_dialog): 
	Fixed dialog fill in. Common dialog for all messages.

	* objects/UML/object.c: 
	Added multiple instance. Dialog related bugs fixed.
	Common dialog for all instances. Completed copy and destroy.

	* objects/UML/lifeline.c (lifeline_load): 
	Conn initialization bug fixed and few bad loading prevention flags.
	Common dialog for all lifeline objects.
	
1999-02-15  Alexander Larsson  <alla@lysator.liu.se>

	* lib/dia_image.[ch]:
	More work on the DiaImage abstraction.
	
	* app/app_procs.c:
	* app/render_eps.c:
	* app/render_gdk.c:
	* objects/standard/image.c:
	Use the new DiaImage calls.

1999-02-15  Alexander Larsson  <alla@lysator.liu.se>

	* app/menus.c:
	* app/display.c:
	Reversed the meaning of align horizontal/vertical.

1999-02-15  Alexander Larsson  <alla@lysator.liu.se>

	* app/load_save.c (diagram_load):
	Statusbar update fix.

1999-02-15  Alexander Larsson  <alla@lysator.liu.se>

	* app/interface.c (create_display_shell):
	Fixed status bar size.
	
1999-02-15  Alexander Larsson  <alla@lysator.liu.se>

	* lib/dia_image.[ch]:
	Added extern declaration for dia_image_release.
	Removed dia_image_draw, as it's not neseccary.

1999-02-14  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>
	
	* app/object_ops.c: 
	* app/menus.c: 
	Added equal distance alignment both vertical and horizontal.
	
	* objects/UML/object.c: 
	Added a couple of attributes to load/read that were missing.

	* objects/UML/lifeline.c: 
	Better handling of handles. Fixed another bug I forgot to add
	to my last patch.
	
1999-02-13  Alexander Larsson  <alla@lysator.liu.se>

	Patch from Lars Clausen <lrclause@shasta.cs.uiuc.edu>
	
	* lib/dia_image.[ch]:
	* lib/Makefile.am:
	New files. DiaImage wraps the GdkImlibImage.

	* lib/render.h:
	* app/render_eps.c:
	* app/render_gdk.c:
	* lib/render_store.[ch]:
	* objects/standard/image.c:
	Use the new DiaImagetype.

	* lib/widgets.c:
	Removed unused variable to eliminate  warning.

1999-02-11  Alexander Larsson  <alla@lysator.liu.se>

	* objects/standard/box.c:
	Added rounded corners on the box object.

	* lib/widgets.[ch]:
	Updated the DiaFileSelector widget.
	
1999-02-09  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>

	* objects/UML/object.c (objet_draw): 
	Completed underlining of all object name lines. 

	* objects/UML/message.c (fill_in_dialog): 
	Fixed a bug that filled incorrectly the message's dialog.

	* objects/UML/lifeline.c (lifeline_load): 
	Some cleanning and fixed a couple of bugs that caused
	crashes after reading diagrams with lifelines.

	* lib/text.c: 
	Added flags to prevent crash with void strings

1999-02-07  Matthias Köster <Matthias.Koester@Informatik.Uni-Oldenburg.DE>
	* app/display.[ch]:
	Added statusbar to the display widget. Currently shows the zoom
	factor and modified flag of the viewed diagram. The statusbar is
	updated upon calls to ddisplay_zoom and ddisplay_update_statusbar.
	This caused the following additions:
	
	* app/diagram.[ch]:
	Added function diagram_set_modified. Calls
	ddisplay_update_statusbar for all displays showing the modified diagram.
	Changed diagram_modified to call diagram_set_modified.
	
	* app/interface.c:
	Added the creation of the statusbar.
	
	* app/load_save.c:
	diagram_save now calls diagram_set_modified instead of setting
	dia->modified. Needed to force call to display_update_statusbar
	
	* app/commands.c:
	Changed the way view_show_all works. Now calls ddisplay_zoom
	instead of directly setting the zoom_factor, so the zoom factor is
	correctly shown in the statusbar.

	* app/magnify.c:
	Fixed rubberband zoom to use ddisplay_zoom().
	
1999-02-07  Fredrik Hallenberg  <hallon@lysator.liu.se>

	* app/app_procs.c
	Rudimentary GNOME session management.
	
	* app/disp_callbacks.c
	* app/interface.c
	* app/menus.c
	* app/menus.h
	GNOME menus. Problems: 
	Callbacks doesn't get user_data.
	Weird warnings when creating popup menus.
	menus_set_sensitive(), menus_set_state() doesn't work.

1999-02-05  Lars Clausen  <lrclause@shasta.cs.uiuc.edu>

	* configure.in:
	Add AM_PATH_GDK_IMLIB() call.

	* app/Makefile.am:
	Add gdk_imlib to linking flags.

	* app/app_procs.c:
	Init gdk_imlib.
	Print library-loading error messages on stdout too.

	* app/interface.c:
	Add standard image to toolbox.
	
	* app/render_eps.c: 
	Set a more reasonable dot length.  Fixed
	missing initialization of dot length.
	Added draw_image methods.

	* app/render_gdk.c (new_gdk_renderer): 
	Dot a bit wider.  Looks good in normal mode now.

	* objects/standard/image.c:
	* objects/standard/pixmaps/image.xpm:
	New files. Standard object for images.
	
	* app/render_eps.c (set_linestyle):
	* app/render_gdk.c (set_linestyle):
	* lib/widgets.c (dia_line_style_selector_init): 
	* lib/render.h: 
	New line style DOTTED.

	* lib/render.h:
	* lib/render_store.c:
	Change DrawImage call to use gdk_imlib.

	* lib/widgets.[ch]:
	Added widgets for selecting files.
	Added dotted to the linestyle selector.

1999-02-06  Alexander Larsson  <alla@lysator.liu.se>

	* objects/network/printer.c:
	* objects/network/network.c:
	* objects/network/pixmaps/printer.xpm:
	* objects/network/.cvsignore:
	* objects/network/Makefile.am:
	* objects/network/pixmaps/Makefile.am:
	New printer object in network.
	From Martin Hawlisch <hawlisch@roxi.rz.fh-mannheim.de>

	* TODO:
	Added known XML bug.
	
1999-02-06  Alexander Larsson  <alla@lysator.liu.se>

	* app/load_save.c:
	* lib/dia_xml.c:
	Reverted back from #include <gnome-xml/tree.h> to
	#include <tree.h> as this is fixed by the xml-config program.
	The former way broke for some people.
	Reported by blizzard@redhat.com.

	* objects/UML/lifeline.c:
	* objects/UML/message.c:
	* objects/UML/object.c:
	Removed some warnings.
	
1999-02-04  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>

	* objects/UML/lifeline.c: 
	Fixed connection points over the life line when the focus of
	control is not drawn.

	* objects/UML/message.c: 
	Now a recursive message can be freely resized using the handles.

1999-02-02  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>

	* objects/UML/lifeline.c:
 	Added connection points.
	Added properties dialog with the option to draw/hide focus of control
	box and destruction mark.

	* objects/UML/object.c: 
	Added properties dialog and stereotype, explicit state and attributes. 
	It's also possible to mark the object as active.

	* objects/UML/pixmaps/object.xpm: 
	Cosmetic change.

	* objects/UML/message.c:
	Added "recursive" message type (was not necessary to use OrthConn).

1999-02-02  Alexander Larsson  <alla@lysator.liu.se>

	* objects/standard/arc.c:
	Removed old debug code. Fixes a visual bug. From lrclause@cs.uiuc.edu.

1999-02-01  Alexander Larsson  <alla@lysator.liu.se>

	Patch from Lars R. Clausen <lrclause@cs.uiuc.edu>
	
	* app/load_save.c:
	* lib/dia_xml.c:
	Update xml includes to gnome-xml/*.h.

	* objects/standard/arc.c:
	Only one property dialog per type.
	Fix arrows directions.

	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/textobj.c
	Added default properties dialog.
	

1999-01-31  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>

	* objects/UML/Makefile.am: 
	* objects/UML/uml.c:
	* objects/UML/lifeline.c: 
	* objects/UML/object.c: 
	* objects/UML/message.c:
	* objects/UML/pixmaps/lifeline.xpm: 
	* objects/UML/pixmaps/object.xpm: 
	* objects/UML/pixmaps/message.xpm:
	Added 3 new UML objects for dynamic modeling. To avoid internal 
	conflicts, the name "objet" is used for object "object".	

	* lib/arrows.[ch]: 
	Added ARROW_HALF_HEAD arrow type to allow drawing asynchronous
	UML messages.
	
1999-01-30  Alexander Larsson  <alla@lysator.liu.se>

	* app/display.[ch]:
	* app/modify_tool.c:
	Added autoscrolling while doing rubber-band select.
	This patch from Matthias Köster
	(Matthias.Koester@Informatik.Uni-Oldenburg.DE)
	

1999-01-28  Alexander Larsson  <alla@lysator.liu.se>

	* app/defaults.[ch]:
	New files, deals with default properties dialog.

	* lib/diamenu.h:
	New file. Contains definitions for the new object menu.

	* lib/poly_conn.[ch]:
	New file. Base class for poly-line like objects.

	* objects/standard/polyline.c:
	* objects/standard/pixmaps/polyline.xpm:
	New files. Polyline object.

	* app/app_procs.c:
	Fixed bug with infinite loop when registering sheets.
	
	* app/commands.c:
	Removed unneccesary stuff.

	* app/disp_callbacks.c:
	Support for object menus.

	* app/interface.c:
	Added polyline to toolbox.
	Added call to tool_options_dialog_show() when double clicking on
	tool.

	* app/tool.[ch]:
	New function tool_options_dialog_show() for tool properties.

	* lib/arrows.[ch]:
	Added ARROW_NONE.

	* lib/object.h:
	Added ObjectType methods for handling object default dialogs.
	Added Object method for handling object_menu.
	Added unused methods to ObjectTypeOps for future binary
	compatibility.

	* lib/widgets.[ch]:
	Added DiaArrowTypeSelector widget.

	* objects/standard/arc.c:
	* objects/standard/zigzagline.c:
	Added support for default properties.

	* objects/standard/line.c:
	Added support for default properties.
	Just use one properties dialog for all line objects. NOTE: This
	seems to have a bug. We're working on it.

	* standard/standard.c:
	Add the polyline object.

1999-01-27  Alexander Larsson  <alla@lysator.liu.se>

	* app/modify_tool.c:
	Commented out buggy transitive select function. It wasn't really
	meant to go into cvs.
	

1999-01-25  Fredrik Hallenberg  <hallon@lysator.liu.se>

	* autogen.sh:
	* acconfig.h:
	* configure.in:
	* Makefile.am:
	* app/Makefile.am:
	* po/POTFILES.in:
	* app/intl.h
	i18n-support.

	* po/sv.po:
	Swedish translation. Not completed.
	
	* configure.in:
	* acconfig.h:
	Added possibility to enable GNOME specific code with configure.

	* configure.in:
	Added possibility to set debug level with configure.

	* commands.[hc]:
	Added about dialog.

	* app_procs.c
	* commands.c
	* interface.c
	* menus.c
	Added some GNOME specific code. Not ready for use.

1999-01-24  Alexander Larsson  <alla@lysator.liu.se>

	* INSTALL:
	Added text about needing gtk 1.1.13 and gnome-xml.
	
	* NEWS:
	Described changes since last version (0.20).

	Released version 0.30, tagged DIA_0_30.

1999-01-22  Alexander Larsson  <alla@lysator.liu.se>

	* app/magnify.c (magnify_button_release):
	Fixed a problem when zooming in on a very small box would
	not release the grabbed pointer-focus.

1999-01-21  Alexander Larsson  <alla@lysator.liu.se>

	* app/load_save.c (diagram_load):
	Be somewhat more robust when loading files that
	are not diagrams.
	
1999-01-21  Alexander Larsson  <alla@lysator.liu.se>

	* app/app_procs.c:
	* objects/ER/er.c:
	* objects/UML/uml.c:
	* objects/network/network.c:
	* objects/standard/standard.c:
	Added versioning of object libraries.

	* app/create_object.c:
	Don't change tool when an object is created.
	
	* objects/network/network.c:

	* TODO:
	Update

1999-01-19  Alexander Larsson  <alla@lysator.liu.se>

	* configure.in:
	Updated gtk requirement to Gtk+ 1.1.13.

	* app/display.c:
	Always add one screenful of scrolling space on
	each side of a diagram window.

1999-01-19  Jeff Garzik  <jgarzik@pobox.com>

	* autogen.sh:
	Tell automake to auto-install missing files.

	* app/menus.c:
	Renamed deprecated Gtk+ function.

1999-01-16  Alexander Larsson  <alla@lysator.liu.se>

	* Makefile.am:
	* configure.in:
	* samples/Makefile.am:
	* samples/ER-demo.dia:
	* samples/UML-demo.dia:
	Added samples directory.
	Added samples for ER and UML.
	
	* app/commands.c:
	* app/disp_callbacks.c:
	* app/menus.c:
	Zoom is done by sqrt(2) instead of 2.
	Lots of more zoom options in the menu.

	* objects/ER/relationship.c:
	Relationships have 8 connectionpoints instead of 4.

	* objects/UML/class.c:
	UML class name font a bit smaller.
	Fixed stupid bug in the copy operation.
	
	* app/display.c:
	Displays are opened at 500x400 instead of 256x256.

	* app/load_save.c:
	Fixup of internal error message.

	* app/color_area.c:
	* app/diagram.c:
	* app/modify_tool.c:
	* lib/object.c:
	Removed debug printf's.
	
	* TODO (BUGS):
	Added new known bug.

1999-01-16  Alexander Larsson  <alla@lysator.liu.se>

	* app/interface.c:
	* app/menus.c:
	Fixed so accelerator groups work in all windows.
	Updated to new gtk function names.

	* TODO (BUGS):
	Removed fixed bug.

	* app/display.c:
	Updated to new gtk function names.
	Set sensitivity of the align menu items.	

	* objects/ER/pixmaps/Makefile.am:
	* objects/UML/pixmaps/Makefile.am:
	* objects/network/pixmaps/Makefile.am:
	Fix so that make dist works.

	* app/app_procs.c:
	* app/color_area.c:
	* app/commands.c:
	* app/diagram.c:
	* app/grid.c:
	* app/layer_dialog.c:
	* app/load_save.c:
	* app/object_ops.c:
	* app/properties.c:
	* lib/diagramdata.[ch]:	
	* lib/message.c:
	* lib/objects/ER/attribute.c:
	* lib/objects/ER/entity.c:
	* lib/objects/ER/participation.c:
	* lib/objects/ER/relationship.c:
	* lib/objects/ER/.c:
	* objects/UML/actor.c:
	* objects/UML/association.c:
	* objects/UML/class_dialog.c:
	* objects/UML/dependency.c:
	* objects/UML/generalization.c:
	* objects/UML/large_package.c:
	* objects/UML/realizes.c:
	* objects/UML/.c:
	* objects/UML/.c:
	Updated to new gtk function names.
	Removed warnings.

1999-01-15  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Update TODO.

	* app/app_procs.c:
	Fixed loading of diagrams specified as arguments.

	* objects/ER/attribute.c:
	* objects/ER/entity.c:
	* objects/ER/er.c:
	* objects/ER/participation.c:
	* objects/ER/relationship.c:
	Updated the ER objects.
	

1999-01-14  Alexander Larsson  <alla@lysator.liu.se>

	* configure.in:
	* app/Makefile.am:
	* objects/Makefile.am:
	* objects/ER/attribute.c:
	* objects/ER/entity.c:
	* objects/ER/er.c:
	* objects/ER/participation.c:
	* objects/ER/relationship.c:
	* objects/ER/pixmaps/Makefile.am:
	* objects/ER/pixmaps/attribute.xpm:
	* objects/ER/pixmaps/entity.xpm:
	* objects/ER/pixmaps/participation.xpm:
	* objects/ER/pixmaps/relationship.xpm:
	* objects/ER/pixmaps/weakentity.xpm:
	First commit of entity relationship objects.
	These were done by hallon@lysator.liu.se.
	There are still stuff to do on these.
	
1999-01-14  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Updates.

	* app/diagram.[ch]:
	Change diagram_remove_all_selected to take new argument
	delete_empty. Empty objects are deleted only if it is TRUE.
	Removed call to close_eps_renderer. This is now done in end_render
	in the eps renderer.

	* app/create_object.c:
	* app/layer_dialog.c:
	Update calls to diagram_remove_all_selected.

	* app/commands.c:
	Update calls to diagram_remove_all_selected.
	Some code reformating.
	Changed order of adding updates i align_h and align_v.

	* app/modify_tool.c:
	Update calls to diagram_remove_all_selected.
	Added pointer grab when doing rubber-band selection, this fixes
	the bug when draging the box over to another window.

	* app/connectionpoint_ops.[ch]:
	diagram_update_connections_object changed to take an argument
	update_nonmoved. This lets connections that has not moved, but
	the stuff they're connected to has been moved work.
	Update calls to the new diagram_update_connections_object.

	* app/properties.c:
	Update calls to the new diagram_update_connections_object.
	Update extents when properties are applied.
	
	* app/disp_callbacks.c:
	Added support for zooming with the '+' and '-' keys.

	* app/menus.c:
	Removed old keyboard shortcuts for zoom.

	* lib/render.h:
	Added calls begin_render and end_render to renderer.
	These can be used for setup and cleanup.

	* lib/diagramdata.c:
	Added calls to begin_render and end_render in data_render.

	* app/render_gdk.c:
	Added begin_render and end_render.

	* app/render_eps.[ch]:
	Added begin_render and end_render.
	Moved close_eps_renderer code to end_render.
	Various fixes to the generated eps code. This fixes importing
	generated eps into LYX.
	
1999-01-12  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Update of todo.
	
	* app/menus.c:
	Menus for alignment updated.

	* app/object_ops.[ch]:
	Functions for object alignment updated.

	* app/commands.[ch]:
	Object alignment callbacks updated.
	New diagrams are called Untitled-<nr>.

	* app/layer_dialog.c:
	Active layer selected when showing layers from new
	diagram.

	* app/load_save.c:
	Compress xml files when saving.
	Use xml namespace 'dia'.

	* lib/object.h:
	Minor comment update.

	* objects/UML/class_dialog.c:
	Cleanup of the gkt_list_item moving code.
	Fixed bug with update of operation when moving parameters.

1999-01-10  Alexander Larsson  <alla@lysator.liu.se>

	* app/layer_dialog.[ch]:
	Fixed the rest of the layers dialog.

	* app/dialog.c:
	Added call to redo layer dialogs diagram list when changing
	diagram name.

	* lib/diagramdata.[ch]:
	Added data_raise_layer and data_lower_layer functions for
	raising/lowering layers. Added data_add_layer_at for adding a
	layer at a specified index.

1999-01-05  Alexander Larsson  <alla@lysator.liu.se>

	This is the asierra-990105 patch done by asierra@servidor.unam.mx.
		
	* app/app_procs.c:
	Added support for reading diagrams from the command line.

1998-12-21  Alexander Larsson  <alla@lysator.liu.se>

	This is the asierra-981220 patch done by asierra@servidor.unam.mx.
		
	* app/commands.[ch]:
	Added objects_align_callback().

	* app/menus.c:
	Added align objects to menu.

	* app/object_ops.[ch]:
	Add object_list_align().
	
1998-12-17  Alexander Larsson  <alla@lysator.liu.se>
	* app/layer_dialog.[ch]:
	New files. Handles the layers dialog. Needs a bugfix for glib to
	work. Sent patch to gtk-list.
	
	* app/pixmaps/new.xpm:
	* app/pixmaps/eye.xbm:
	* app/pixmaps/lower.xpm:
	* app/pixmaps/raise.xpm:
	* app/pixmaps/delete.xpm:
	New files. Images for the layer dialog buttons.
	
	* lib/diagramdata.h
	* lib/diagramdata.c
	New files for the DiagramData and Layer structures and functions.
	
	* app/app_procs.c:
	Added call to create_layer_dialog() on startup.
	
	* app/commands.[ch]:
	New callbacks for showing the properties and layout dialog.
	Changes for the new DiagramData structure.

	* app/connectionpoint_ops.c:
	* app/cut_n_paste.c:
	* app/diagram.[ch]:
	* app/display.[ch]:
	* app/group.c:
	* app/modify_tool.c:
	* app/object_ops.[ch]:
	* app/render_eps.c:
	* lib/object.[ch]:
	Changes for the new DiagramData structure.

	* app/interface.c:
	* app/properties.c:
	Set correct wmclasses.

	* app/load_save.c:
	Fix load and save of layers.

	* diagram.dtd:
	Update DTD for layers.
	
	* app/menus.c:
	New menus for dialogs.

	
	* TODO:
	Some updates.
	
1998-12-06  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Removed the gtk 1.1.5 stuff.

	* configure.in:
	Updated gtk check to version 1.1.5.
	Updated version from 0.20 to 0.30

	* app/commands.[ch]:
	Updated some callbacks to be of type GtkItemFactoryCallback1.
	Not all are done yet, but it works anyway.

	* app/display.h:
	Removed Gtk 1.0.0 GtkAcceleratorTable references.
	
	* app/interface.c:
	* app/menus.[ch]:
	Update to Gtk 1.1.x functions.
	Use ItemFactory instead of MenuFactory.
	
	* app/render_gdk.c:
	Removed Gtk 1.0.0 references.

	* objects/UML/class_dialog.c:
	Scrolled window updates for Gtk 1.1.5.
	
	* lib/dia_xml.c:
	Removed ugly fix for gnome-xml bug. Make sure you get the
	newest version of gnome-xml from CVS.
	
1998-12-05  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Removed the xml load/save line.

	* lib/files.[ch]:
	Removed files.
	
	* lib/Makefile.am:
	Removed building of files.c

	* app/load_save.c:
	* lib/connection.c:
	* lib/element.c:
	* lib/object.c:
	* lib/orth_conn.c:
	* lib/render_object.c:
	* objects/UML/actor.c:
	* objects/UML/association.c:
	* objects/UML/class.c:
	* objects/UML/constraint.c:
	* objects/UML/dependency.c:
	* objects/UML/generalization.c:
	* objects/UML/implements.c:
	* objects/UML/large_package.c:
	* objects/UML/note.c:
	* objects/UML/realizes.c:
	* objects/UML/small_package.c:
	* objects/UML/uml.c:
	* objects/UML/usecase.c:
	* objects/network/bus.c:
	* objects/standard/arc.c:
	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/line.c:
	* objects/standard/textobj.c:
	* objects/standard/zigzagline.c:
	Removed all includes of files.h

	
1998-12-05  Alexander Larsson  <alla@lysator.liu.se>

	* dialog.dtd:
	Made the val property of string be implied.
	This makes it possible to save strings that
	are NULL. Just leave out val.

	* objects/lib/dia_xml.c:
	Fixed string so that it is possible to save strings
	that are NULL. Also made an ugly workaround of a
	bug in gnome-xml which removes empty properties.
	
	* objects/lib/orth_conn.c:
	Fixed a bug in saving. Forgot to step through the
	directions.
	
	* objects/UML/association.c: 
	* objects/UML/class.c: 
	* objects/UML/constraint.c: 
	* objects/UML/dependency.c: 
	* objects/UML/generalization.c: 
	* objects/UML/implements.c: 
	* objects/UML/large_package.c: 
	* objects/UML/note.c: 
	* objects/UML/small_package.c:
	* objects/UML/realizes.c:
	* objects/UML/usecase.c: 
	* objects/UML/actor.c: 
	Fixed UML objects to save as xml.
	The last two were done by asierra@servidor.unam.mx (asierra-981204)
	
	* objects/UML/uml.[ch]:
	Updated *_write() and *_read() functions to use xml.

	* objects/network/bus.c: 
	* objects/network/computer.c: 
	* objects/network/disc.c: 
	* objects/network/monitor.c:
	Updated network diagrams to use xml.

1998-12-02  Alexander Larsson  <alla@lysator.liu.se>

	* dialog.dtd:
	New file. DTD that describes the xml file format
	dia uses.

	* lib/dia_xml.[ch]:
	New files. Support for saving object to xml files.

	* configure.in:
	* app/Makefile.am:
	* lib/Makefile.am:
	Added check for and usage of gnome-xml library.

	* app/load_save.c:
	Major chages. Now saves/loads diagrams as xml.

	* lib/object.[ch]:
	* lib/element.[ch]:
	* lib/connection.[ch]:
	* lib/orth_conn.[ch]:
	* lib/render_object.[ch]:
	* lib/text.[ch]:
	Updated object support load/save functions for xml:

	* object/standard/arc.c:
	* object/standard/box.c:
	* object/standard/ellipse.c:
	* object/standard/line.c:
	* object/standard/textobj.c:
	* object/standard/zigzagline.c:
	Updated all standard objects to use xml.
	
	NOTE NOTE NOTE
	Only the standard objects are converted right now, don't
	save or load uml or network diagrams yet. Also, since this
	is new code it is deemed a bit unstable.
	
	* TODO
	Added a know bug.

1998-12-01  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/class.c:
	Changed classname font to Helvetica.
	Added more space above the classname

	* objects/UML/usecase.c:
	Correct placements of connectionpoints on ellipse.
	Better algorithm for deciding aspect ration on
	ellipse.

	These changes were made by Alejandro Aguilar Sierra
	<asierra@servidor.unam.mx>. (asierra-981201)

1998-11-30  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/actor.c:
	Changed the extents and alignment of the element
	and the text.

	* objects/UML/.cvsignore:
	Added usecase.lo and actor.lo.

1998-11-30  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/actor.c:
	* objects/UML/usecase.c:
	* objects/UML/pixmaps/actor.xpm:
	* objects/UML/pixmaps/case.xpm:
	New files. Implements usecase and actor UML objects.
	These objects are done by Alejandro Aguilar Sierra
	<asierra@servidor.unam.mx>.
	
	* objects/UML/Makefile.am:
	* objects/UML/pixmaps/Makefile.am:
	Added usecase and actor to makefile.
	
	* AUTHORS:
	Added Alejandro and Jerome to autors list.
	
1998-11-25  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/class.c (umlclass_load):
	Fixed typo. Reported by Jerome.Abela@solsoft.fr

1998-11-24  Alexander Larsson  <alla@lysator.liu.se>

	* app/properties.c:
	Update connections when doing apply in the properties window.

	* objects/UML/uml.[ch]:
	* objects/UML/class.[ch]:
	* objects/UML/class_dialog.c:
	Added connection points on both sides of attributes and
	operations in UML classes.
	Based on idea from Jerome.Abela@solsoft.fr
	
1998-11-24  Alexander Larsson  <alla@lysator.liu.se>

	* README:
	Some new documentation about handles and connectionpoints.
	
	* lib/object.[ch]:
	Added functions object_add_connectionpoint and
	object_remove_connectionpoint for handling a dynamic
	number of connectionpoints.

	* objects/UML/class.c:
	Only reserve space for stereotype when it is shown.

	These changes are from Jerome Abela <Jerome.Abela@solsoft.fr>

1998-11-08  Alexander Larsson  <alla@lysator.liu.se>

	* app/connectionpoint_ops.c:
	* app/commands.c:
	* app/disp_callbacks.c:
	* app/display.[ch]:
	* app/grid.c:
	* app/handle_ops.c:
	* app/magnify.c:
	* app/modify_tool.c:
	* app/render_gdk.[ch]:
	* lib/render.h:
	Huge cleanup of internal rendering system.
	Moved a lot of data (pixmap, width, height & gc) into the GdkRenderer.
	This gives a few new methods for Interactive Renderers for setting
	clipping regions and drawing pixel based lines and rects.
	Updated the rest of the code to use the new stuff.
	
	* app/render_eps.c:
	Fixed warning.

	* lib/widgets.c:
	* objects/standard/zigzagline.c
	Fixed unused variable warnings.

	* lib/font.c:
	Fixedbug with stringwidth where width==0.

	* TODO:
	Added known bug.

1998-11-02  Alexander Larsson  <alla@lysator.liu.se>

	* lib/widgets.[ch]:
	Added suppot for setting the font of a
	DiaFontSelector widget.
	Also fixed some typos in the header.

	* lib/object.h: 
	Added a comment about the GetPRoperties method call.
	You have to make sure to update widget state when
	this method is called. (Not all objects do this yet,
	to be fixed.)

	* TODO:
	Some small updates

1998-11-01  Alexander Larsson  <alla@lysator.liu.se>

	* lib/font.c
	Fixed problem with height of ascent and descent for fonts.
	It didn't use the whole height (==ascent+descent) when calculatine
	ascent_ratio and descent_ratio.

	* objects/standard/textobj.c:
	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/line.c:
	* objects/standard/arc.c:
	Updated and added property dialogs for these objects.
	Also added line width/color/style to those objects
	that didn't have it.
	This change breaks fileformat compatibility for these objects.
	
	* objects/standard/zigzagline.c:
	Changed zigzagline to be based on OrthConn, much nicer.
	Also added line style and color to properties.
	This change breaks fileformat compatibility for zigzagline.

	* lib/message.c:
	Fixed bug in message(). Forgot a pair of '&'.

1998-10-29  Alexander Larsson  <alla@lysator.liu.se>

	* lib/widgets.[ch]:
	Added DiaColorSelector widget.
	This is a colored button that pops up a color selection
	dialog when pressed.

1998-10-28  Alexander Larsson  <alla@lysator.liu.se>

	* lib/widgets.[ch]:
	* lib/Makefile.am:
	New files, added widgets for selecting fonts, alignment
	and line-style. Will be used later.

1998-10-12  Alexander Larsson  <alla@lysator.liu.se>

	* app/Makefile.am:
	* lib/Makefile.am:
	* objects/UML/Makefile.am:
	* objects/network/Makefile.am:
	* objects/standard/Makefile.am:
	Changed "CFLAGS = -Wall -g" to "CFLAGS = @CFLAGS@"
	in all Makefile.am.

1998-10-03  Alexander Larsson  <alla@lysator.liu.se>

	* app/handle_ops.c (handle_draw):
	connected HANDLE_MINOR_CONTROL also becomes red.

1998-10-02  Alexander Larsson  <alla@lysator.liu.se>

	* Makefile.am:
	removed -ldl from linking. This is added if needed by configure.

	* app/app_procs.c:
	Open dlls with RTLD_LAZY if it is defined.
	Some cleanups: char *error -> const char *error
	Added fprintf()'s to where we exited because of errors.

	* lib/files.c:
	Include <sys/types.h>

1998-10-01  Alexander Larsson  <alla@lysator.liu.se>

	* acconfig.h:
	* configure.in:
	* app/app_procs.c:
	Detect dlopen better.
	Detect wether dlopen needs an underscore in the identifier.
	This code was mostly borrowed from guile.

	* lib/sheet.[ch]:
	* app/app_procs.c:
	* objects/standard/standard.c:
	* objects/network/network.c:
	* objects/UML/uml.c:
	* most objects:
	Changed the way sheets reference objects to use just the
	name. Changed module loading to a two stage model:
	First register_objects() is called for all modules.
	Then register_sheets() is called. This means that
	sheets can safely include objects from other modules.
	

1998-09-30  Alexander Larsson  <alla@lysator.liu.se>

	* objects/network/bus.c:
	* objects/network/network.c:
	* objects/network/Makefile.am:
	New file bus.c. Added new object: Ethernet bus.

	* objects/standard/box.c:
	Added call to gtk_spin_button_set_numeric for linewidth spinner
	in property dialog.

1998-09-30  Alexander Larsson  <alla@lysator.liu.se>

	* app/connectionpoint_ops.c:
	* app/create_object.c:
	* app/group.c:
	* app/handle_ops.c:
	* app/modify_tool.c:
	* lib/connection.c:
	* lib/element.c:
	* lib/handle.h:
	* lib/object.c:
	* lib/orth_conn.c:
	* loads of objects:
	Changed handle->connectable to handle->connect_type.
	Now handles can be HANDLE_CONNECTABLE_NOBREAK, which means
	that their connections don't break when moving objects.

	* app/diagram.c:
	Always select the last handle in an object that has
	the closest distance.
	
	* lib/geometry.[ch]:
	Added rectangle_add_point function.
	

1998-09-27  Alexander Larsson  <alla@lysator.liu.se>

	* app/properties.[ch]: New files. Handles the new properties
	dialog.

	* app/modify_tool.c: Changed to use new properties dialog.

	* app/object_ops.[ch]: Removed object_changed_callback, as it's
	not needed anymore. This is now handled differently in
	properties.c

	* lib/object.[ch]:
	Changed the properties ops for objects. Removed typedefs
	ChangedObjectTime and ObjectChangedFunc needed for the old way.
	Added object_return_null function.
	
	* app/group.c:
	* lib/render_object.c:
	* objects/*/*.c:
	Changed objects to use the new properties dialog.
	

1998-09-14  Nuno Ferreira  <nmrf@rnl.ist.utl.pt>

	* */Makefile.am (INCLUDES): Changes to work with srcdir !=
	builddir.

	* autogen.sh: New file. Copied from gtk and added a call to
	libtoolize. Anyone knows why this isn't done in gtk?

	* Removed autogenerated files.

1998-09-12  Alexander Larsson  <alla@lysator.liu.se>

	* Added call setlocale(LC_NUMERIC, "C") so that formating of
	  floating-point numbers in postscript output will be correct.
	* Did some cleanup of generated postscript files. 
