1999-08-18  James Henstridge  <james@daa.com.au>

	* app/color_area.c (color_area_edit): small fix to prevent dia from
	segfaulting when you try to change the default foreground/background.

1999-08-17  Alexander Larsson  <alla@lysator.liu.se>

	* app/diagram.[ch] (diagram_redraw_all):
	Added function that redraws all diagrams.

	* app/preferences.c (prefs_apply):
	Call diagram_redraw_all when prefs are changed.

	* app/render_svg.c:
	Don't use xmlEncodeEntitiesReentrant(). It doesn't exist on
	older libxml's, and the old version works good enought here.
	
1999-08-17  James Henstridge  <james@daa.com.au>

	* lib/widgets.c: changed handlers that were connected to the GtkButton
	"pressed" signal to connect to the "clicked" signal.  This removes the
	problem where dialogs are inactive until you click a mouse button
	after using a colour selector.

	* configure.in: added extra makefiles to AC_OUTPUT list.
	
	* objects/Makefile.am (SUBDIRS): added flowchart module

	* objects/flowchart/*: a collection of shapes for use in flowcharts.

	* app/color_area.c (color_area_events): similar here.

	* app/linewidth_area.c (linewidth_area_events): sometimes a configure
	event is recieved with event->width == 0, which causes a warning if we
	try to create a pixmap of that width.

	* app/preferences.c, app/preferences.h, app/grid.c: added code to
	allow you to configure the colour of the grid, and also lets you
	set the grid to use dotted lines instead of solid ones.
	
	* app/commands.c, app/commands.h, app/diagram.c, app/diagram.h,
	app/menus.c, app/Makefile.am: added menu entry for exporting SVG files.
	
	* app/render_svg.h, app/render_svg.c: an SVG (Scalable Vector Graphics)
	export filter.  It is not quite complete, but for most shapes it
	works as expected.  Fonts still need a bit of work.

1999-08-11  Robert Brady  <rwb197@ecs.soton.ac.uk>

	* configure.in: Added "en_GB" to ALL_LINGUAS.

1999-08-04  Fredrik Hallenberg  <hallon@lysator.liu.se>

	* menus.c
	Added Undo and Redo to GNOME menus.
	
	* objects/ER/attribute.c:
	* objects/ER/entity.c:
	* objects/ER/participation.c:
	* objects/ER/relationship.c:
	Added get/set_state functions.

	* objects/ER/participation.c:
	Added add/delete segment.

	* po/sv.po
	Updated Swedish translation.

1999-07-25  Alexander Larsson  <alla@lysator.liu.se>

        * app/preferences.[hc]:
	Added undo_depth pref.
	
	* app/undo.[ch]:
	Never grow stack larger than pref.undo_depth.
	undo_depth == 0 means unlimited.
	Converted printfs to conditionally compiled DEBUG_PRINTFs.
	
1999-07-25  Alexander Larsson  <alla@lysator.liu.se>

        * app/diagram.c:
	* app/group.c:
	* lib/object.h:
	* lib/render_object.c:
	* objects/ER/attribute.c:
	* objects/ER/entity.c:
	* objects/ER/participation.c:
	* objects/ER/relationship.c:
	* objects/FS/flow-ortho.c:
	* objects/FS/flow-poly.c:
	* objects/FS/flow.c:
	* objects/FS/function.c:
	* objects/UML/actor.c:
	* objects/UML/association.c:
	* objects/UML/class.c:
	* objects/UML/classicon.c:
	* objects/UML/component.c:
	* objects/UML/constraint.c:
	* objects/UML/dependency.c:
	* objects/UML/generalization.c:
	* objects/UML/implements.c:
	* objects/UML/large_package.c:
	* objects/UML/lifeline.c:
	* objects/UML/message.c:
	* objects/UML/note.c:
	* objects/UML/object.c:
	* objects/UML/realizes.c:
	* objects/UML/small_package.c:
	* objects/UML/state.c:
	* objects/UML/usecase.c:
	* objects/network/bus.c:
	* objects/standard/arc.c:
	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/image.c:
	* objects/standard/line.c:
	* objects/standard/polyline.c:
	* objects/standard/textobj.c:
	* objects/standard/zigzagline.c:
	Removed all traces of is_empty(). It doesn't work in an
	Undo/Redo world.

1999-07-25  Alexander Larsson  <alla@lysator.liu.se>

        * app/diagram.c:
	* app/group.[ch]:
	* app/undo.[ch]:
	Undoable grouping and ungrouping.

	* app/layer_dialog.c:
	* lib/diagramdata.[ch]:
	Undoable layer ops.

	* app/modify_tool.c:
	Undoable unconnect on handle move.

	* lib/orth_conn.[ch]:
	Working undoable add/remove segment.
	Removed endpoint_handles from OrthConn, renamed
	midpoint_handles to handles and put the endpoint
	handles there.

	* objects/standard/zigzagline.c:
	* objects/ER/participation.c:
	* objects/UML/association.c:
	* objects/UML/dependency.c:
	* objects/UML/generalization.c:
	* objects/UML/realizes.c:
	Update for the changes in OrthConn
	
1999-07-23  Karsten Weiss  <karsten@addx.au.s.shuttle.de>

	* configure.in: Added "de" to ALL_LINGUAS.

1999-07-17  Alexander Larsson  <alla@lysator.liu.se>

	* dia.1:
	Fixed typo.

	* app/display.c:
	* po/da.po:
	* po/fr.po:
	* po/hu.po:
	* po/no.po:
	* po/pl.po:
	* po/sv.po:
	Don't have the <Display> etc part of the menu strings
	i18n:ed. Patch from Fabrice.Bellet@imag.fr.

	* app/diagram.c:
	Don't have the <Display> etc part of the menu strings
	i18n:ed. Patch from Fabrice.Bellet@imag.fr.
	Don't remove is_empty() objects, that don't work with undo.

	* lib/objchange.[ch]:
	New files.
	Definition of ObjectChange. This is essentially an Change
	exported to the object libs. It encapsulates a change made
	to an objects internals. It can be applied, reverted and freed.
	There are also utility functions for doing ObjectChanges that
	only get/set the whole state of an object to store the change.
	This cannot be used when the object change deletes or adds a
	object which has references from other objects, eg. Handles which
	might be connected.

	* lib/Makefile.am:
	Added objchange.c and objchange.h.

	* lib/dia_image.c:
	Return NULL when loading fails.

	* lib/diamenu.h:
	Menu callbacks return an ObjectChange.

	* lib/dummy_dep.h:
	Reference objchange.o

	* lib/focus.h:
	Key events return ObjectChange if they modify the object.

	
	* lib/object.h:
	Added object_add_handle_at() function.
	Apply properties returns an ObjectChange.
	Remove ObjectState and the get/set state functions, these
	don't always work. Use the new ObjectChange instead.
	
	* lib/object.c:
	Added object_add_handle_at() function implementation.
	
	* lib/orth_conn.[ch]:
	Use ObjectChange. Not finished yet.
	Removed get/set/free state functions

	* lib/poly_conn.[ch]:
	Use ObjectChange.
	Don't remove segments that are small.
	Removed get/set/free state functions

	* lib/text.[ch]:
	Use ObjectChange.
	Added functions to get/set all text attributes.

	* objects/standard/arc.c:
	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/image.c:
	* objects/standard/line.c:
	* objects/standard/polyline.c:
	* objects/standard/textobj.c:
	* objects/standard/zigzagline.c:
	Use ObjectChange.
	fixed bug in image_set_state.
	zigzagline.c not finished yet.

	* app/disp_callbacks.c:
	Use ObjectChange that are returned from menu callbacks and
	key_events for undo.

	* app/properties.c:
	Use ObjectChange that are returned from properties apply
	for undo.

	* app/undo.c:
	* app/undo.h:
	New undo type: ObjectChangeChange. This wraps a change to the
	internals of an object (and ObjectChange) in code that does
	app specific stuff (object_add_updates etc.)

1999-07-11  Alexander Larsson  <alla@lysator.liu.se>

	* lib/orth_conn.[ch]:
	Added code for add/delete segment.

	* objects/standard/zigzagline.c:
	Use the new orth_conn code.
	

1999-07-08  Fredrik Hallenberg  <hallon@lysator.liu.se>

	* objects/FS/Makefile.am
	Removed fs.h from sources.

	* Makefile.am
	* dia.1
	Added man page.

1999-07-07  Alexander Larsson  <alla@lysator.liu.se>

	* app/disp_callbacks.c (ddisplay_canvas_events):
	Fix for bug. Every other arrow-key press got lost.
	patch from Mr. Data Esq. <data@r47h102.res.gatech.edu>

	* INSTALL:
	change automake.sh to autogen.sh
	
1999-06-24  Alexander Larsson  <alla@lysator.liu.se>

	* app/diagram.c:
	Don't remove 'empty' objects.
	This violent destruction of objects won't work
	with the new undo framework.

	* app/disp_callbacks.c:
	Save undo info for object menu calls and key_events.

	* app/properties.c:
	Save undo info on properties apply.

	* lib/dia_image.[ch]:
	Add refcounting for images.

	* app/render_eps.c:
	* app/render_gdk.c:
	* lib/render.h:
	DiaImage * -> DiaImage

	* app/undo.[ch]:
	Add undo functions for object state changes.

	* lib/focus.h:
	* lib/text.c:
	change of semntics for focus->key_event.
	Now returns TRUE if the object recieving the event
	was changed.

	* lib/object.h:
	Comment changes.

	* lib/orth_conn.[ch]:
	Don't automatically create and delete segments when
	handles are moved. This is incompatible with undo.
	Added state get, set and free functions.

	* lib/orth_conn.[ch]:
	Added state get, set and free functions.

	* objects/UML/object.c:
	* objects/UML/uml.c:
	Fixed typo "UML - Objet" -> "UML - Object".
	Saved old for backwards compatibility.

	* objects/standard/arc.c:
	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/image.c:
	* objects/standard/line.c:
	* objects/standard/polyline.c:
	* objects/standard/textobj.c:
	* objects/standard/zigzagline.c:
	Added get/set state functions.
	Textobj has a redo crash-bug.
	Zigzagline needs object menus to add segments.
	

1999-06-20  Alexander Larsson  <alla@lysator.liu.se>

	* app/render_eps.c (set_dashlength):
	Don't generate eps files with zero dash-length.

1999-06-16  Alexander Larsson  <alla@lysator.liu.se>

	* app/commands.c:
	* app/create_object.c:
	* app/undo.[ch]:
	Finished undo for create and paste.
	
	* lib/object.h:
	Started properties undo.

1999-06-14  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Added resizeable groups.

	* app/app_procs.c:
	Removed unused variable.

	* app/commands.c:
	* app/undo.[ch]:
	Undo/redo for cut/delete done.

	* app/create_object.c:
	* app/modify_tool.c:
	* lib/diagramdata.[ch]:
	* app/diagram.[ch]:
	renamed diagram_add_selected -> diagram_select
	renamed diagram_remove_selected -> diagram_unselect
	
	* app/properties.[ch]:
	Added properties_hide_if_shown() function.

1999-06-13  Alexander Larsson  <alla@lysator.liu.se>

	* app/undo.[ch]:
	* app/Makefile.am:
	Undo functions.
	
	* app/commands.[ch]
	* app/modify_tool.[ch]
	* app/object_ops.[ch]
	* app/connectionpoint_ops.c
	* app/menus.c
	Use undo functions.
	WARNING: Not finished. Will break.
	Finished: move object, move handle.

	* app/diagram.[ch]
	Added diagram_selected_break_external() function.
	It removes all connections between selected objects
	and non-selected.
	Add undo stack to Diagram.
	
	* lib/diagramdata.[ch]
	Added layer_remove_objects() function
	
1999-06-11  Fredrik Hallenberg  <hallon@lysator.liu.se>

	* objects/FS/Makefile.am
	* objects/sybase/Makefile.am
	Now uses GNOME_CFLAGS.

	* app/app_procs.c
	Now compiles with GNOME even if popt.h isn't available.

1999-06-10  Alexander Larsson  <alla@lysator.liu.se>

	* configure.in
	* objects/Makefile.am
	* objects/sybase/*
	First version of sybase objects from
	Brian Bruns <camber@umcc.ais.org>

1999-06-10  Fredrik Hallenberg  <hallon@lysator.liu.se>

	* configure.in
	Added fr to ALL_LINGUAS

1999-06-09  Fredrik Hallenberg  <hallon@lysator.liu.se>

	* configure.in
	* app/app_procs.c
	Popt-code is activated if popt is available.

1999-06-08  Alexander Larsson  <alla@lysator.liu.se>

        This is a patch from David Thompson <dcthomp@mail.utexas.edu>
	
	* lib/orth_conn.[ch]:
	Added orthconn_get_middle_handle()

	* lib/text.[ch]:
	Added text_set_cursor_at_end()
	
	* objects/FS/*
	Added first version of functions structure diagrams.
	
1999-05-24  Alexander Larsson  <alla@lysator.liu.se>

	* app/modify_tool.c:
	Include math.h to remove warning.

	* app/commands.c (dialogs_properties_callback):
	Bring up correct properties dialog when selected
	from menu.
	From Dan Cohn <dan@internap.com>

1999-05-20  Alexander Larsson  <alla@lysator.liu.se>

	Patch from Lars R. Clausen 
	
	* app/modify_tool.c:
	Changed abs to fabs.

1999-05-19  Alexander Larsson  <alla@lysator.liu.se>

	* INSTALL: 
	* configure.in:
	Require Gtk+ 1.2.0

1999-05-18  Alexander Larsson  <alla@lysator.liu.se>

	Patches from Dan Cohn <dan@internap.com>
	
	* app/commands.[ch]: 
	* app/display.[ch]: 
	* app/menus.c:
	* app/preferences.[ch]:
	Implements ability to turn on/off connection points in
	current drawing and in global prefs.

1999-05-18  Alexander Larsson  <alla@lysator.liu.se>

	* lib/widgets.c (dia_line_style_selector_init): 
	Fixed warnings.
	
	* lib/diagramdata.c (layer_update_extents):
	Fixed uninitialized variable error.

1999-05-17  Alexander Larsson  <alla@lysator.liu.se>

	* lib/dia_image.c:
	Made some changes to the gdk_imlib visual+colormap setup.

1999-05-17  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>

	* objects/UML/usecase.c: 
       * objects/UML/lifeline.c
	Fine tunning.

	* objects/UML/object.c: 
	* objects/UML/message.c: 
 	Changed font from Courier to Helvetica.

	* lib/widgets.c: 
	* lib/widgets.h:
 	Added dash lenth to the LineStyle widget.
	
	* objects/standard/ellipse.c :
	* objects/standard/zigzagline.c: 
	* objects/standard/line.c: 
	Added dash lenght property.

1999-05-16  Alexander Larsson  <alla@lysator.liu.se>

	* app/render_eps.c:
	First shot at latin1 encoded eps files.
	Works, but the eps files get a bit large.
	
1999-05-16  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/class.[ch]: 
	* objects/UML/uml.[ch]:
	Reverted the line wrap changes.
	Some day this might return, but it has to be selectable and
	default to off for loaded objects, otherwise it breaks file
	format compatibility.
	There was also some complains about how it looked, so a making it
	selectable is good for this too.

1999-05-15  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/class.[ch]:
	Some indentation cleanup.
	Added wrap_lines variable to class.
	I'll fix the line break stuff tomorrow.

1999-05-13  Alexander Larsson  <alla@lysator.liu.se>

	* lib/dummy_dep.h:
	Added ref to poly_conn.o.

	* objects/standard/polyline.c (polyline_draw): 
	* objects/standard/zigzagline.c (zigzagline_draw): 
	* objects/standard/arc.c (arc_draw): 
	* objects/standard/line.c (line_draw):
	Draw lines before arrows. This makes hollow arrows not
	show the line.

1999-05-13  Alexander Larsson  <alla@lysator.liu.se>

	Changes from Kim Peasley <kpeasley@ior.com> 
		
	* dia/objects/UML/class.c:
	Break lines with long operations so classes won't be
	so wide.

	* dia/objects/UML/uml.[ch]:
	Helperfunctions for the above.
	
	* dia/objects/UML/objects.c:
	Fix bug that duplicated the text in the attributes
	textwidget each time the object was selected.
	
1999-05-12  Alexander Larsson  <alla@lysator.liu.se>

	Changes from Lars R. Clausen <lrclause@cs.uiuc.edu>
	
	* app/modify_tool.c:
	* app/modify_tool.h:
	Control-drag is restricted to vertical/horizontal movement
	
	* lib/object.h:
	ModifierKeys argument added to object_move_handle

	* app/connectionpoint_ops.c:
	* app/create_object.c:
	* app/object_ops.c:
	* objects/ER/attribute.c:
	* objects/ER/entity.c:
	* objects/ER/participation.c:
	* objects/ER/relationship.c:
	* objects/UML/actor.c:
	* objects/UML/association.c:
	* objects/UML/class.c:
	* objects/UML/classicon.c:
	* objects/UML/component.c:
	* objects/UML/constraint.c:
	* objects/UML/dependency.c:
	* objects/UML/generalization.c:
	* objects/UML/implements.c:
	* objects/UML/large_package.c:
	* objects/UML/lifeline.c:
	* objects/UML/message.c:
	* objects/UML/note.c:
	* objects/UML/object.c:
	* objects/UML/realizes.c:
	* objects/UML/small_package.c:
	* objects/UML/state.c:
	* objects/UML/usecase.c:
	* objects/network/bus.c:
	* objects/standard/arc.c:
	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/image.c:
	* objects/standard/line.c:
	* objects/standard/polyline.c:
	* objects/standard/textobj.c:
	* objects/standard/zigzagline.c:
	Changed calls to move_handle to pass the new argument.
	
	* lib/widgets.c:
	* lib/widgets.h:
	Default line width, color etc #define'd
	
	* po/da.po:
	Updates of danish menus

1999-05-08  Fredrik Hallenberg  <hallon@lysator.liu.se>

	* dia.xpm
	* dia_gnome_icon.png
	* dia_gnome_menu_icon.png
	* dia_logo.png
	Graphics by Toussaint Frédéric <ftoussin@club-internet.fr>.

	* app/commands.c
	About dialog shows dia_logo.png. Removed the GNOME about dialog.

	* Makefile.am
	Distribute the icons and install logo in pkgdatadir.
	
	* app/Makefile.am
	Added DATADIR-define.
	
1999-04-28  Alexander Larsson  <alla@lysator.liu.se>
	Patches from Enrico Scholz <enrico.scholz@wirtschaft.tu-chemnitz.de>

	* dia.spec:
	Updated version number, made setup quiet, can build from cvs,
	--enable-gnome, now using automake 1.4 DESTDIR feature, install-strip

	* lib/Makefile.am
	* objects/ER/Makefile.am
	* objects/UML/Makefile.am
	* objects/network/Makefile.am
	* objects/standard/Makefile.am
	now builds better with gnome

	* objects/UML/class_dialog.c
	Fixed typo -> po files must be updated too!!
	
1999-04-28  Alexander Larsson  <alla@lysator.liu.se>

	* lib/dummy_dep.h:
	Added reference so that widgets.o gets linked to the app.

1999-04-23  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>

	* objects/UML/classicon.c: 
	Added object mode.

	* objects/UML/actor.c: 
	Changed position of 'snap-to-grid' so connection points are
	in the grid.

1999-04-22  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/classicon.c:
	Changed position of 'snap-to-grid'.
	By Alejandro Aguilar Sierra <asierra@servidor.unam.mx>
	
1999-04-22  Alexander Larsson  <alla@lysator.liu.se>

	* objects/network/antenna.c
	* objects/network/flash.c
	* objects/network/hub.c
	* objects/network/modem.c
	* objects/network/modularswitch.c
	* objects/network/rj45plug.c
	* objects/network/scead-plug.c
	* objects/network/network.c
	* objects/network/Makefile.am
	* objects/network/pixmaps/antenna.xpm
	* objects/network/pixmaps/flash.xpm
	* objects/network/pixmaps/hub.xpm
	* objects/network/pixmaps/modem.xpm
	* objects/network/pixmaps/modularswitch.xpm
	* objects/network/pixmaps/rj45plug.xpm
	* objects/network/pixmaps/sceadplug.xpm
	* objects/network/pixmaps/Makefile.am
	Lots of new network objects from
	Roland Steinbach <roland@support-system.com>.

1999-04-15  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>
 
        * objects/UML/classicon.c: 
        Fixed connection positions, saved type as int (it has 3 states),
        and other small fixes.
	
1999-04-14  Alexander Larsson  <alla@lysator.liu.se>

	* app/preferences.c:
	* app/load_save.c:
	Added preference compress_save. It lets dia save uncompressed
	xml files.

	* objects/UML/class.c:
	Fixed bug with size calculation on methods that had class scope.
	
1999-04-13  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>

	* objects/UML/usecase.c: 
	Added collaboration mode
	Fixed connection points with text > ellipse bug and other 
	small things

	* objects/UML/state.c:
 	Fixed bug of bad position of text after being either end
	or begin, moved and returned to text

1999-04-12  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

        * app/preferences.c: Add prototype declaration for prefs_apply.

1999-04-11  Alexander Larsson  <alla@lysator.liu.se>

	* app/preferences.c:
	Added 'ok' button.
	Apply don't hide window.

	* app/properties.c:
	Add 'ok' button.

	* objects/UML/object.c:
	* objdcts/UML/state.c:
	Some data was not copied on copy.

	This patch is from
	Ben Hochstedler <benh@eeyore.moneng.mei.com>

1999-04-09  Alexander Larsson  <alla@lysator.liu.se>

	* app/Makefile.am:
	Changed link order between X and libxml.
	Some people had problems with an old libz in their
	x11 directory.	

1999-04-09  Kjartan Maraas  <kmaraas@online.no>

	* po/no.po: updated translation.
	
1999-04-08  Lars R. Clausen <lrclause@cs.uiuc.edu>

	* lib/message.c (message_error):
	Fixed small error.

	* app/commands.[ch]:
	* app/diagram.[ch]:
	Added begining of xfig importing

1999-04-08  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>
 
	* objects/UML/pixmaps/state.xpm: 
 	* objects/UML/state.c: 
 	New UML object state machine.

	* objects/UML/uml.c:
	* objects/UML/Makefile.am:
	* objects/UML/pixmaps/Makefile.am:
	Added the state object.
	
1999-04-08  Alejandro Aguilar Sierra  <ale@bucefalo>
 
	* objects/UML/usecase.c: 
	Added dialog to allow move text outside the ellipse.
 
1999-04-08  Alexander Larsson  <alla@lysator.liu.se>

	* Released Dia 0.41
	Tag called DIA_0_41

	* NEWS:
	Updates for 0.41.
	
1999-04-08  Alexander Larsson  <alla@lysator.liu.se>

	* configure.in:
	Updated version number to 0.41

	* po/*.po:
	Update po-files

1999-04-04  Fredrik Hallenberg  <hallon@lysator.liu.se>

	* app/app_procs.c
	Changed errormessage for --export-to-ps. Removed call to 
	g_log_set_always_fatal().

	* app/diagram.c
	* app/disp_callbacks.c
	* app/load_save.c
	(i18n) Removed gettext from some debugmessages.

	* app/menus.c
	Small fix in GNOME-menus. Added warning that will help track
	problems with translations.

	* po/sv.po
	(i18n) Updated swedish translation.

1999-04-02  Alexander Larsson  <alla@lysator.liu.se>

	* po/da.po:
	New updates

1999-04-01  Alexander Larsson  <alla@lysator.liu.se>

	* po/da.po:
	* po/no.po:
	Some fixes.
	
1999-04-01  Alexander Larsson  <alla@lysator.liu.se>

	* po/da.po:
	(i18n) Updated the danish translation.
	From Lars R. Clausen.

1999-04-01  Fredrik Hallenberg  <hallon@lysator.liu.se>

	* app/menus.c
	(i18n) The popup menu is translated now.

	* po/sv.po
	(i18n) Updated swedish translation.

1999-03-29  Alexander Larsson  <alla@lysator.liu.se>

	* Released Dia 0.40
	Tag called DIA_0_40

	* NEWS:
	Updated for new release
	
1999-03-29  Alexander Larsson  <alla@lysator.liu.se>

	* objects/network/bus.c:
	Added initialization of properties dialog to NULL.

	* app/commands.c (edit_cut_callback):
	Update menu sensitivity when cut object.

	* app/modify_tool.c (click_select_object):
	* app/modify_tool.c (modify_button_release): 
	Call diagram_update_menu_sensitivity() when
	selecting objects to update stuff that depends
	on selected/not selected.

1999-03-29  Alexander Larsson  <alla@lysator.liu.se>

	* Makefile.am:
	Change order of subdir so that libintl.a builds.
	Now passed make distcheck.

1999-03-28  Alexander Larsson  <alla@lysator.liu.se>

	* lib/font.c (init_x11_font):
	Stupid bug fixed.

1999-03-28  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>

	* objects/UML/pixmaps/classicon.xpm: 
	* objects/UML/classicon.c:
	* objects/UML/uml.c:
	Added the class stereotype icon objects.

	* app/commands.c:
	Changed default ps extension from .ps to .eps.
	
1999-03-28  Alexander Larsson  <alla@lysator.liu.se>

	* lib/Makefile.am:
	Added diamenu.h and intl.h

	* lib/font.c:
	Stupid typo fix.
	
	* objects/UML/pixmaps/Makefile.am:
	Added message.xpm

	* objects/standard/pixmaps/Makefile.am:
	Added image.xpm

1999-03-28  Alexander Larsson  <alla@lysator.liu.se>

	* lib/font.c:
	Use a scalable font before fixed when real font not found.

	* app/commands.c:
	Removed warning.

	* objects/standard/image.c:
	Better handling of loading/saving of images.

	* INSTALL:
	Added some text about cvs, fonts and rewrote some parts.

	* TODO:
	Updated with new stuff.
	
	* configure.in:
	Bump up version number to 0.40.
	
1999-03-28  Alexander Larsson  <alla@lysator.liu.se>

	* app/display.c:
	Moved diagram_add_ddisplay() call into new_display().
	Fixed new_display to not use uninitialized variables
	causing loaded files to show up as black (or garbage).
	
	* app/commands.c:
	* app/app_procs.c:
	Removed unneeded calls to diagram_add_ddisplay().
	
1999-03-28  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/lifeline.c:
	Fixed bug in copy.
	Patch from Andreas Jaeger <aj@arthur.rhein-neckar.de>.

	* objects/UML/message.c:
	Fixed bug loading messages with null-text.
	Patch from Andreas Jaeger <aj@arthur.rhein-neckar.de>.

1999-03-27  Fredrik Hallenberg  <hallon@lysator.liu.se>

	* po/sv.po
	Updated swedish translation.

	* app/menus.c
	(GNOME) Removed help-browser from help menu. Fixed typo.

	* app/interface.c
	(GNOME) Accelerators in diagrams should work now. 

1999-03-25  Fredrik Hallenberg  <hallon@lysator.liu.se>

	* app/app_procs.c
	* app/commands.c
	* app/defaults.c
	* app/disp_callbacks.c
	* app/display.c
	* app/interface.c
	* app/menus.c
	* app/preferences.c
	* app/render_eps.c
	* lib/diagramdata.c
	* lib/font.c
	* lib/message.c
	* lib/widgets.c
	* objects/ER/*.c
	* objects/UML/*.c
	* objects/network/*.c
	* objects/standard/*.c
	* po/update_pofiles_in.sh
	* po/POFILES.in
	More i18n. All strings (expect rare debug messages) can be
	translated now. Moved intl.h from app to lib. Updated
	update_pofiles_in.sh to check all .c-files.

1999-03-23  Alexander Larsson  <alla@lysator.liu.se>

	* app/disp_callbacks.c (ddisplay_canvas_events):
	Don't drop keys while num-lock, scroll-lock etc is on.

1999-03-22  Alexander Larsson  <alla@lysator.liu.se>

	* app/render_eps.c (draw_image):
	Fixed exporting of images.
	Still not perfect, but not outright buggy.
	
1999-03-22  Alexander Larsson  <alla@lysator.liu.se>

	* configure.in:
	* po/hu.po:
	Added hungarian translation. By Shooby Ban <bansz@szif.hu>.

	* app/Makefile.am:
	Added $* to the dia call in run_dia.sh

1999-03-22  Lars Clausen  <lrclause@shasta.cs.uiuc.edu>
	
	* lib/color.[ch]:
	Added color_equals() call.

	* objects/standard/arc.c:
	* objects/standard/line.c:
	Don't save unneccesary data.
	
	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/image.c:
	* objects/standard/polyline.c:
	* objects/standard/zigzagline.c:
	Share properties dialog.
	Don't save unneccesary data.
	
1999-03-22  Seth Alves  <alves@hungry.com>

	* app/menus.c:
	* app/diagram.c:
	* app/display.c:
	small changes so that gnome menus aren't broken
	
1999-03-22  Alexander Larsson  <alla@lysator.liu.se>

	* po/da.po:
	Added danish translation from lrclause@cs.uiuc.edu.

	* po/POFILES.in:
	Updated file.

	* po/update_pofiles_in.sh:
	Added script that updates POFILES.in.
	This should probably be run automatically from somewhere.

1999-03-19  Alexander Larsson  <alla@lysator.liu.se>

	* app/diagram.[ch]:
	Added function diagram_update_menu_sensitivity() which
	sets the sensitivity of some menu items. This function
	is called at each diagram state change (from diagram_modified()).
	This is needed 	because otherwise the keyboard accelerators
	don't work correctly.

	* app/display.[ch]:
	Changed display_set_menu_sensitivity() to display_update_menu_state().
	Moved lots of code to diagram_update_menu_sensitivity() in
	diagram.c. Optimized to only look up menu-items from path:s once.
	
	* app/disp_callbacks.c:
	* app/interface.c:
	When we get a GDK_FOCUS_CHANGE, update menu sensitivity.
	Need to set GDK_FOCUS_CHANGE_MASK.
	
	* app/create_object.c:
	Call diagram_modified when an object has been created and
	selected so that the menu sensitivity is updated. 

	* app/menus.[ch]:
	removed menus_set_sensitive() and menus_set_state(). Exported
	renamed function menus_get_item_from_path().

1999-03-15  Alexander Larsson  <alla@lysator.liu.se>

	* app/disp_callbacks.c:
	Show (empty) object menus on object that has none.
	Show title on object menus.

	* app/display.c:
	Set zoom factor correctly when opening new displays.
	Better setting of scrollbars.

	* app/grid.c:
	* app/menus.h:
	Some reformating cleanup.

	* lib/diamenu.h:
	Added title to object menus.

	* objects/*/*.c:
	Added object menu method (NULL-valued) to all objects.

	* objects/standard/polyline.c:
	Added title to object menu.

1999-03-14  Alexander Larsson  <alla@lysator.liu.se>

	* app/preferences.[ch]:
	New files. Implements the preferences dialog and
	loading/saving of ~/.diarc.

	* app/Makefile.am:
	Added preferences.[ch].

	* app/app_procs.c:
	Load preferences on startup.

	* app/commands.[ch]:
	Added file_preferences_callback to show the preferences dialog.

	* app/create_object.c:
	Update extents when creating object.
	Use the reset_tools_after_create preferences setting.

	* app/display.c:
	Use preferences when creating new display.

	* app/menus.c:
	Add preferences to menu.

	* app/defaults.c:
	* app/layer_dialog.c:
	* app/properties.c:
	Don't allow shrinking of dialog.
	Add i18n of some strings.

1999-03-11  Kjartan Maraas  <kmaraas@fib.hl.no>
        * po/no.po:
	Norwegian translation added.
	
1999-03-11  Alexander Larsson  <alla@lysator.liu.se>

	* objects/standard/line.c: 
	* objects/standard/arc.c: 
	* objects/standard/polyline.c: 
	* objects/standard/zigzagline.c:
	Loading of arrow data fixed.

1999-03-09  Alexander Larsson  <alla@lysator.liu.se>

	* app/commands.c:
	Update extents when saving and exporting to postscript.
	Fixes a bug with postscript bounding-box being wrong.

	* app/defaults.c:
	Changed border width from 5 to 2.

	* app/group.c:
	Move grouped objects by the move-point of the first object.
	Fixes bug that made all objects in the group be off-grid
	when moving the group, even though all objects was on-grid.

	* app/layer_dialog.c:
	Update extents when changing layer.

1999-03-08  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>
 
       * objects/UML/uml.c: 
       * objects/UML/component.c: 
       * objects/UML/pixmaps/component.xpm: 
       Added the UML component object
	
1999-03-04  Seth Alves  <alves@hungry.com>

	* objects/UML/generalization.c (generalization_create): avoid
	math on uninitialized genlz->text_width (NaN causes sigfpe)
	
	* objects/UML/realizes.c (realizes_create): same

	* objects/UML/dependency.c (dependency_create): same

1999-03-01  Seth Alves  <alves@hungry.com>

	* app/display.c (ddisplay_active): don't fly a warning panel
	if ddisplay_active is called when no views are open.

	* app/commands.c (set_default_file_selection_directory): set
	file selector's default directory if there is already
	a document open.

1999-02-28  Alexander Larsson  <alla@lysator.liu.se>

	* INSTALL:
	New info about imlib requirements.

	* Configure.in:
	Added lib/pixmaps/Makefile to created makefiles.

	* app/app_procs.c:
	* app/commands.c:
	Change from obsoleted to newer gtk calls.
	
	* load_save.c:
	Pass filename of the diagram when loading and saving.
	This creates better oportunities to handle filename saving.

	* lib/object.h:
	Pass filenames to load and save methods.
	
	* lib/dia_image.[ch]:
	Added dia_image_get_broken() call that returns a image which
	is used for 'broken' images.
	
	* lib/pixmaps/.cvsignore:
	* lib/pixmaps/Makefile.am:
	* lib/pixmaps/broken.xpm:
	New files for the broken image bitmap.

	* lib/widgets.c:
	Fixed bug with double destroyed filedialog.

	* objects/*/*.c:
	Updated load and save prototypes to use the new filename argument.

	* objects/image.c:
	Render broken image instead of line when got no image.
	Use the new filename in load and save to save (if possible)
	relative pathnames and to better try to find loaded images.

1999-02-28  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Some updates to the todo file.
	
	* app/menus.c:
	* app/display.c:
	Place over/place over => sent to back/bring to front.
	Added some keyboard shortcuts to menus.
	
1999-02-28  Alexander Larsson  <alla@lysator.liu.se>

	* lib/dia_xml.c:
	Changed string saving/loading to a new method. This should
	be much better att handling &,<,> and whitespaces.
	Loading strings of the old kind is still supported for backwards
	compatibility.

	* samples/ER-demo.dia:
	* samples/UML-demo.dia:
	Updated to use the new strings.
	
	* app/load_save.c:
	statusbar modified update fix.

1999-02-27  Seth Alves  <alves@hungry.com>

	* app/app_procs.c (app_init): added a --export-to-ps option
	which will cause dia to load a dia file and save it as ps
	and then exit.  this is a little bogus, because it still
	pops up a window.  this option only shows up if --enable-gnome
	is used

	* app/display.c (display_set_menu_sensitivity): no Edit/Delete
	menu when built with --enable-gnome

	* app/interface.c (create_display_shell): build status bar
	even if --enable-gnome is used

	* app/menus.c: menu fixes for --enable-gnome

	* app/commands.c (file_open_dialog_ok_callback): fixed up
	menus when --enable-gnome is used
	(file_export_to_eps_callback): set a default file name
	when dialog is created

1999-02-27  Alexander Larsson  <alex@c125.ryd.student.liu.se>

	* objects/UML/association.c (association_create):
	Fixed usage of not initialized variable.
	Pointed out by Seth Alves <alves@hungry.com>.

1999-02-24  Alexander Larsson  <alex@c125.ryd.student.liu.se>

	* configure.in:
	Fixed detection of gnome-xml.
	From Valtteri Vuorikoski <vuori@k.notcom.org>.
	
	* app/app_procs.c:
	Fixed error detection on dlsym calls. 
	From Valtteri Vuorikoski <vuori@k.notcom.org>.

1999-02-23  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/message.c (fill_in_dialog):
	Fixed warnings.

1999-02-22  Lars Clausen  <lrclause@shasta.cs.uiuc.edu>

	* objects/standard/zigzagline.c:
	* objects/standard/polyline.c:
	* objects/standard/line.c:
	* objects/standard/arc.c:
	* lib/widgets.h:
	* lib/arrows.h:
	* lib/widgets.c:
	Support for sizeable arrows. 

	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/image.c:
	Changed creation handle to lower-right.
	Transparent box/ellipse.
	
	* objects/standard/image.c:
	Better layout of properties boxes.

1999-02-20  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>

	* objects/UML/message.c (fill_in_dialog): 
	Fixed dialog fill in. Common dialog for all messages.

	* objects/UML/object.c: 
	Added multiple instance. Dialog related bugs fixed.
	Common dialog for all instances. Completed copy and destroy.

	* objects/UML/lifeline.c (lifeline_load): 
	Conn initialization bug fixed and few bad loading prevention flags.
	Common dialog for all lifeline objects.
	
1999-02-15  Alexander Larsson  <alla@lysator.liu.se>

	* lib/dia_image.[ch]:
	More work on the DiaImage abstraction.
	
	* app/app_procs.c:
	* app/render_eps.c:
	* app/render_gdk.c:
	* objects/standard/image.c:
	Use the new DiaImage calls.

1999-02-15  Alexander Larsson  <alla@lysator.liu.se>

	* app/menus.c:
	* app/display.c:
	Reversed the meaning of align horizontal/vertical.

1999-02-15  Alexander Larsson  <alla@lysator.liu.se>

	* app/load_save.c (diagram_load):
	Statusbar update fix.

1999-02-15  Alexander Larsson  <alla@lysator.liu.se>

	* app/interface.c (create_display_shell):
	Fixed status bar size.
	
1999-02-15  Alexander Larsson  <alla@lysator.liu.se>

	* lib/dia_image.[ch]:
	Added extern declaration for dia_image_release.
	Removed dia_image_draw, as it's not neseccary.

1999-02-14  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>
	
	* app/object_ops.c: 
	* app/menus.c: 
	Added equal distance alignment both vertical and horizontal.
	
	* objects/UML/object.c: 
	Added a couple of attributes to load/read that were missing.

	* objects/UML/lifeline.c: 
	Better handling of handles. Fixed another bug I forgot to add
	to my last patch.
	
1999-02-13  Alexander Larsson  <alla@lysator.liu.se>

	Patch from Lars Clausen <lrclause@shasta.cs.uiuc.edu>
	
	* lib/dia_image.[ch]:
	* lib/Makefile.am:
	New files. DiaImage wraps the GdkImlibImage.

	* lib/render.h:
	* app/render_eps.c:
	* app/render_gdk.c:
	* lib/render_store.[ch]:
	* objects/standard/image.c:
	Use the new DiaImagetype.

	* lib/widgets.c:
	Removed unused variable to eliminate  warning.

1999-02-11  Alexander Larsson  <alla@lysator.liu.se>

	* objects/standard/box.c:
	Added rounded corners on the box object.

	* lib/widgets.[ch]:
	Updated the DiaFileSelector widget.
	
1999-02-09  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>

	* objects/UML/object.c (objet_draw): 
	Completed underlining of all object name lines. 

	* objects/UML/message.c (fill_in_dialog): 
	Fixed a bug that filled incorrectly the message's dialog.

	* objects/UML/lifeline.c (lifeline_load): 
	Some cleanning and fixed a couple of bugs that caused
	crashes after reading diagrams with lifelines.

	* lib/text.c: 
	Added flags to prevent crash with void strings

1999-02-07  Matthias Köster <Matthias.Koester@Informatik.Uni-Oldenburg.DE>
	* app/display.[ch]:
	Added statusbar to the display widget. Currently shows the zoom
	factor and modified flag of the viewed diagram. The statusbar is
	updated upon calls to ddisplay_zoom and ddisplay_update_statusbar.
	This caused the following additions:
	
	* app/diagram.[ch]:
	Added function diagram_set_modified. Calls
	ddisplay_update_statusbar for all displays showing the modified diagram.
	Changed diagram_modified to call diagram_set_modified.
	
	* app/interface.c:
	Added the creation of the statusbar.
	
	* app/load_save.c:
	diagram_save now calls diagram_set_modified instead of setting
	dia->modified. Needed to force call to display_update_statusbar
	
	* app/commands.c:
	Changed the way view_show_all works. Now calls ddisplay_zoom
	instead of directly setting the zoom_factor, so the zoom factor is
	correctly shown in the statusbar.

	* app/magnify.c:
	Fixed rubberband zoom to use ddisplay_zoom().
	
1999-02-07  Fredrik Hallenberg  <hallon@lysator.liu.se>

	* app/app_procs.c
	Rudimentary GNOME session management.
	
	* app/disp_callbacks.c
	* app/interface.c
	* app/menus.c
	* app/menus.h
	GNOME menus. Problems: 
	Callbacks doesn't get user_data.
	Weird warnings when creating popup menus.
	menus_set_sensitive(), menus_set_state() doesn't work.

1999-02-05  Lars Clausen  <lrclause@shasta.cs.uiuc.edu>

	* configure.in:
	Add AM_PATH_GDK_IMLIB() call.

	* app/Makefile.am:
	Add gdk_imlib to linking flags.

	* app/app_procs.c:
	Init gdk_imlib.
	Print library-loading error messages on stdout too.

	* app/interface.c:
	Add standard image to toolbox.
	
	* app/render_eps.c: 
	Set a more reasonable dot length.  Fixed
	missing initialization of dot length.
	Added draw_image methods.

	* app/render_gdk.c (new_gdk_renderer): 
	Dot a bit wider.  Looks good in normal mode now.

	* objects/standard/image.c:
	* objects/standard/pixmaps/image.xpm:
	New files. Standard object for images.
	
	* app/render_eps.c (set_linestyle):
	* app/render_gdk.c (set_linestyle):
	* lib/widgets.c (dia_line_style_selector_init): 
	* lib/render.h: 
	New line style DOTTED.

	* lib/render.h:
	* lib/render_store.c:
	Change DrawImage call to use gdk_imlib.

	* lib/widgets.[ch]:
	Added widgets for selecting files.
	Added dotted to the linestyle selector.

1999-02-06  Alexander Larsson  <alla@lysator.liu.se>

	* objects/network/printer.c:
	* objects/network/network.c:
	* objects/network/pixmaps/printer.xpm:
	* objects/network/.cvsignore:
	* objects/network/Makefile.am:
	* objects/network/pixmaps/Makefile.am:
	New printer object in network.
	From Martin Hawlisch <hawlisch@roxi.rz.fh-mannheim.de>

	* TODO:
	Added known XML bug.
	
1999-02-06  Alexander Larsson  <alla@lysator.liu.se>

	* app/load_save.c:
	* lib/dia_xml.c:
	Reverted back from #include <gnome-xml/tree.h> to
	#include <tree.h> as this is fixed by the xml-config program.
	The former way broke for some people.
	Reported by blizzard@redhat.com.

	* objects/UML/lifeline.c:
	* objects/UML/message.c:
	* objects/UML/object.c:
	Removed some warnings.
	
1999-02-04  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>

	* objects/UML/lifeline.c: 
	Fixed connection points over the life line when the focus of
	control is not drawn.

	* objects/UML/message.c: 
	Now a recursive message can be freely resized using the handles.

1999-02-02  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>

	* objects/UML/lifeline.c:
 	Added connection points.
	Added properties dialog with the option to draw/hide focus of control
	box and destruction mark.

	* objects/UML/object.c: 
	Added properties dialog and stereotype, explicit state and attributes. 
	It's also possible to mark the object as active.

	* objects/UML/pixmaps/object.xpm: 
	Cosmetic change.

	* objects/UML/message.c:
	Added "recursive" message type (was not necessary to use OrthConn).

1999-02-02  Alexander Larsson  <alla@lysator.liu.se>

	* objects/standard/arc.c:
	Removed old debug code. Fixes a visual bug. From lrclause@cs.uiuc.edu.

1999-02-01  Alexander Larsson  <alla@lysator.liu.se>

	Patch from Lars R. Clausen <lrclause@cs.uiuc.edu>
	
	* app/load_save.c:
	* lib/dia_xml.c:
	Update xml includes to gnome-xml/*.h.

	* objects/standard/arc.c:
	Only one property dialog per type.
	Fix arrows directions.

	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/textobj.c
	Added default properties dialog.
	

1999-01-31  Alejandro Aguilar Sierra  <asierra@servidor.unam.mx>

	* objects/UML/Makefile.am: 
	* objects/UML/uml.c:
	* objects/UML/lifeline.c: 
	* objects/UML/object.c: 
	* objects/UML/message.c:
	* objects/UML/pixmaps/lifeline.xpm: 
	* objects/UML/pixmaps/object.xpm: 
	* objects/UML/pixmaps/message.xpm:
	Added 3 new UML objects for dynamic modeling. To avoid internal 
	conflicts, the name "objet" is used for object "object".	

	* lib/arrows.[ch]: 
	Added ARROW_HALF_HEAD arrow type to allow drawing asynchronous
	UML messages.
	
1999-01-30  Alexander Larsson  <alla@lysator.liu.se>

	* app/display.[ch]:
	* app/modify_tool.c:
	Added autoscrolling while doing rubber-band select.
	This patch from Matthias Köster
	(Matthias.Koester@Informatik.Uni-Oldenburg.DE)
	

1999-01-28  Alexander Larsson  <alla@lysator.liu.se>

	* app/defaults.[ch]:
	New files, deals with default properties dialog.

	* lib/diamenu.h:
	New file. Contains definitions for the new object menu.

	* lib/poly_conn.[ch]:
	New file. Base class for poly-line like objects.

	* objects/standard/polyline.c:
	* objects/standard/pixmaps/polyline.xpm:
	New files. Polyline object.

	* app/app_procs.c:
	Fixed bug with infinite loop when registering sheets.
	
	* app/commands.c:
	Removed unneccesary stuff.

	* app/disp_callbacks.c:
	Support for object menus.

	* app/interface.c:
	Added polyline to toolbox.
	Added call to tool_options_dialog_show() when double clicking on
	tool.

	* app/tool.[ch]:
	New function tool_options_dialog_show() for tool properties.

	* lib/arrows.[ch]:
	Added ARROW_NONE.

	* lib/object.h:
	Added ObjectType methods for handling object default dialogs.
	Added Object method for handling object_menu.
	Added unused methods to ObjectTypeOps for future binary
	compatibility.

	* lib/widgets.[ch]:
	Added DiaArrowTypeSelector widget.

	* objects/standard/arc.c:
	* objects/standard/zigzagline.c:
	Added support for default properties.

	* objects/standard/line.c:
	Added support for default properties.
	Just use one properties dialog for all line objects. NOTE: This
	seems to have a bug. We're working on it.

	* standard/standard.c:
	Add the polyline object.

1999-01-27  Alexander Larsson  <alla@lysator.liu.se>

	* app/modify_tool.c:
	Commented out buggy transitive select function. It wasn't really
	meant to go into cvs.
	

1999-01-25  Fredrik Hallenberg  <hallon@lysator.liu.se>

	* autogen.sh:
	* acconfig.h:
	* configure.in:
	* Makefile.am:
	* app/Makefile.am:
	* po/POTFILES.in:
	* app/intl.h
	i18n-support.

	* po/sv.po:
	Swedish translation. Not completed.
	
	* configure.in:
	* acconfig.h:
	Added possibility to enable GNOME specific code with configure.

	* configure.in:
	Added possibility to set debug level with configure.

	* commands.[hc]:
	Added about dialog.

	* app_procs.c
	* commands.c
	* interface.c
	* menus.c
	Added some GNOME specific code. Not ready for use.

1999-01-24  Alexander Larsson  <alla@lysator.liu.se>

	* INSTALL:
	Added text about needing gtk 1.1.13 and gnome-xml.
	
	* NEWS:
	Described changes since last version (0.20).

	Released version 0.30, tagged DIA_0_30.

1999-01-22  Alexander Larsson  <alla@lysator.liu.se>

	* app/magnify.c (magnify_button_release):
	Fixed a problem when zooming in on a very small box would
	not release the grabbed pointer-focus.

1999-01-21  Alexander Larsson  <alla@lysator.liu.se>

	* app/load_save.c (diagram_load):
	Be somewhat more robust when loading files that
	are not diagrams.
	
1999-01-21  Alexander Larsson  <alla@lysator.liu.se>

	* app/app_procs.c:
	* objects/ER/er.c:
	* objects/UML/uml.c:
	* objects/network/network.c:
	* objects/standard/standard.c:
	Added versioning of object libraries.

	* app/create_object.c:
	Don't change tool when an object is created.
	
	* objects/network/network.c:

	* TODO:
	Update

1999-01-19  Alexander Larsson  <alla@lysator.liu.se>

	* configure.in:
	Updated gtk requirement to Gtk+ 1.1.13.

	* app/display.c:
	Always add one screenful of scrolling space on
	each side of a diagram window.

1999-01-19  Jeff Garzik  <jgarzik@pobox.com>

	* autogen.sh:
	Tell automake to auto-install missing files.

	* app/menus.c:
	Renamed deprecated Gtk+ function.

1999-01-16  Alexander Larsson  <alla@lysator.liu.se>

	* Makefile.am:
	* configure.in:
	* samples/Makefile.am:
	* samples/ER-demo.dia:
	* samples/UML-demo.dia:
	Added samples directory.
	Added samples for ER and UML.
	
	* app/commands.c:
	* app/disp_callbacks.c:
	* app/menus.c:
	Zoom is done by sqrt(2) instead of 2.
	Lots of more zoom options in the menu.

	* objects/ER/relationship.c:
	Relationships have 8 connectionpoints instead of 4.

	* objects/UML/class.c:
	UML class name font a bit smaller.
	Fixed stupid bug in the copy operation.
	
	* app/display.c:
	Displays are opened at 500x400 instead of 256x256.

	* app/load_save.c:
	Fixup of internal error message.

	* app/color_area.c:
	* app/diagram.c:
	* app/modify_tool.c:
	* lib/object.c:
	Removed debug printf's.
	
	* TODO (BUGS):
	Added new known bug.

1999-01-16  Alexander Larsson  <alla@lysator.liu.se>

	* app/interface.c:
	* app/menus.c:
	Fixed so accelerator groups work in all windows.
	Updated to new gtk function names.

	* TODO (BUGS):
	Removed fixed bug.

	* app/display.c:
	Updated to new gtk function names.
	Set sensitivity of the align menu items.	

	* objects/ER/pixmaps/Makefile.am:
	* objects/UML/pixmaps/Makefile.am:
	* objects/network/pixmaps/Makefile.am:
	Fix so that make dist works.

	* app/app_procs.c:
	* app/color_area.c:
	* app/commands.c:
	* app/diagram.c:
	* app/grid.c:
	* app/layer_dialog.c:
	* app/load_save.c:
	* app/object_ops.c:
	* app/properties.c:
	* lib/diagramdata.[ch]:	
	* lib/message.c:
	* lib/objects/ER/attribute.c:
	* lib/objects/ER/entity.c:
	* lib/objects/ER/participation.c:
	* lib/objects/ER/relationship.c:
	* lib/objects/ER/.c:
	* objects/UML/actor.c:
	* objects/UML/association.c:
	* objects/UML/class_dialog.c:
	* objects/UML/dependency.c:
	* objects/UML/generalization.c:
	* objects/UML/large_package.c:
	* objects/UML/realizes.c:
	* objects/UML/.c:
	* objects/UML/.c:
	Updated to new gtk function names.
	Removed warnings.

1999-01-15  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Update TODO.

	* app/app_procs.c:
	Fixed loading of diagrams specified as arguments.

	* objects/ER/attribute.c:
	* objects/ER/entity.c:
	* objects/ER/er.c:
	* objects/ER/participation.c:
	* objects/ER/relationship.c:
	Updated the ER objects.
	

1999-01-14  Alexander Larsson  <alla@lysator.liu.se>

	* configure.in:
	* app/Makefile.am:
	* objects/Makefile.am:
	* objects/ER/attribute.c:
	* objects/ER/entity.c:
	* objects/ER/er.c:
	* objects/ER/participation.c:
	* objects/ER/relationship.c:
	* objects/ER/pixmaps/Makefile.am:
	* objects/ER/pixmaps/attribute.xpm:
	* objects/ER/pixmaps/entity.xpm:
	* objects/ER/pixmaps/participation.xpm:
	* objects/ER/pixmaps/relationship.xpm:
	* objects/ER/pixmaps/weakentity.xpm:
	First commit of entity relationship objects.
	These were done by hallon@lysator.liu.se.
	There are still stuff to do on these.
	
1999-01-14  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Updates.

	* app/diagram.[ch]:
	Change diagram_remove_all_selected to take new argument
	delete_empty. Empty objects are deleted only if it is TRUE.
	Removed call to close_eps_renderer. This is now done in end_render
	in the eps renderer.

	* app/create_object.c:
	* app/layer_dialog.c:
	Update calls to diagram_remove_all_selected.

	* app/commands.c:
	Update calls to diagram_remove_all_selected.
	Some code reformating.
	Changed order of adding updates i align_h and align_v.

	* app/modify_tool.c:
	Update calls to diagram_remove_all_selected.
	Added pointer grab when doing rubber-band selection, this fixes
	the bug when draging the box over to another window.

	* app/connectionpoint_ops.[ch]:
	diagram_update_connections_object changed to take an argument
	update_nonmoved. This lets connections that has not moved, but
	the stuff they're connected to has been moved work.
	Update calls to the new diagram_update_connections_object.

	* app/properties.c:
	Update calls to the new diagram_update_connections_object.
	Update extents when properties are applied.
	
	* app/disp_callbacks.c:
	Added support for zooming with the '+' and '-' keys.

	* app/menus.c:
	Removed old keyboard shortcuts for zoom.

	* lib/render.h:
	Added calls begin_render and end_render to renderer.
	These can be used for setup and cleanup.

	* lib/diagramdata.c:
	Added calls to begin_render and end_render in data_render.

	* app/render_gdk.c:
	Added begin_render and end_render.

	* app/render_eps.[ch]:
	Added begin_render and end_render.
	Moved close_eps_renderer code to end_render.
	Various fixes to the generated eps code. This fixes importing
	generated eps into LYX.
	
1999-01-12  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Update of todo.
	
	* app/menus.c:
	Menus for alignment updated.

	* app/object_ops.[ch]:
	Functions for object alignment updated.

	* app/commands.[ch]:
	Object alignment callbacks updated.
	New diagrams are called Untitled-<nr>.

	* app/layer_dialog.c:
	Active layer selected when showing layers from new
	diagram.

	* app/load_save.c:
	Compress xml files when saving.
	Use xml namespace 'dia'.

	* lib/object.h:
	Minor comment update.

	* objects/UML/class_dialog.c:
	Cleanup of the gkt_list_item moving code.
	Fixed bug with update of operation when moving parameters.

1999-01-10  Alexander Larsson  <alla@lysator.liu.se>

	* app/layer_dialog.[ch]:
	Fixed the rest of the layers dialog.

	* app/dialog.c:
	Added call to redo layer dialogs diagram list when changing
	diagram name.

	* lib/diagramdata.[ch]:
	Added data_raise_layer and data_lower_layer functions for
	raising/lowering layers. Added data_add_layer_at for adding a
	layer at a specified index.

1999-01-05  Alexander Larsson  <alla@lysator.liu.se>

	This is the asierra-990105 patch done by asierra@servidor.unam.mx.
		
	* app/app_procs.c:
	Added support for reading diagrams from the command line.

1998-12-21  Alexander Larsson  <alla@lysator.liu.se>

	This is the asierra-981220 patch done by asierra@servidor.unam.mx.
		
	* app/commands.[ch]:
	Added objects_align_callback().

	* app/menus.c:
	Added align objects to menu.

	* app/object_ops.[ch]:
	Add object_list_align().
	
1998-12-17  Alexander Larsson  <alla@lysator.liu.se>
	* app/layer_dialog.[ch]:
	New files. Handles the layers dialog. Needs a bugfix for glib to
	work. Sent patch to gtk-list.
	
	* app/pixmaps/new.xpm:
	* app/pixmaps/eye.xbm:
	* app/pixmaps/lower.xpm:
	* app/pixmaps/raise.xpm:
	* app/pixmaps/delete.xpm:
	New files. Images for the layer dialog buttons.
	
	* lib/diagramdata.h
	* lib/diagramdata.c
	New files for the DiagramData and Layer structures and functions.
	
	* app/app_procs.c:
	Added call to create_layer_dialog() on startup.
	
	* app/commands.[ch]:
	New callbacks for showing the properties and layout dialog.
	Changes for the new DiagramData structure.

	* app/connectionpoint_ops.c:
	* app/cut_n_paste.c:
	* app/diagram.[ch]:
	* app/display.[ch]:
	* app/group.c:
	* app/modify_tool.c:
	* app/object_ops.[ch]:
	* app/render_eps.c:
	* lib/object.[ch]:
	Changes for the new DiagramData structure.

	* app/interface.c:
	* app/properties.c:
	Set correct wmclasses.

	* app/load_save.c:
	Fix load and save of layers.

	* diagram.dtd:
	Update DTD for layers.
	
	* app/menus.c:
	New menus for dialogs.

	
	* TODO:
	Some updates.
	
1998-12-06  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Removed the gtk 1.1.5 stuff.

	* configure.in:
	Updated gtk check to version 1.1.5.
	Updated version from 0.20 to 0.30

	* app/commands.[ch]:
	Updated some callbacks to be of type GtkItemFactoryCallback1.
	Not all are done yet, but it works anyway.

	* app/display.h:
	Removed Gtk 1.0.0 GtkAcceleratorTable references.
	
	* app/interface.c:
	* app/menus.[ch]:
	Update to Gtk 1.1.x functions.
	Use ItemFactory instead of MenuFactory.
	
	* app/render_gdk.c:
	Removed Gtk 1.0.0 references.

	* objects/UML/class_dialog.c:
	Scrolled window updates for Gtk 1.1.5.
	
	* lib/dia_xml.c:
	Removed ugly fix for gnome-xml bug. Make sure you get the
	newest version of gnome-xml from CVS.
	
1998-12-05  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Removed the xml load/save line.

	* lib/files.[ch]:
	Removed files.
	
	* lib/Makefile.am:
	Removed building of files.c

	* app/load_save.c:
	* lib/connection.c:
	* lib/element.c:
	* lib/object.c:
	* lib/orth_conn.c:
	* lib/render_object.c:
	* objects/UML/actor.c:
	* objects/UML/association.c:
	* objects/UML/class.c:
	* objects/UML/constraint.c:
	* objects/UML/dependency.c:
	* objects/UML/generalization.c:
	* objects/UML/implements.c:
	* objects/UML/large_package.c:
	* objects/UML/note.c:
	* objects/UML/realizes.c:
	* objects/UML/small_package.c:
	* objects/UML/uml.c:
	* objects/UML/usecase.c:
	* objects/network/bus.c:
	* objects/standard/arc.c:
	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/line.c:
	* objects/standard/textobj.c:
	* objects/standard/zigzagline.c:
	Removed all includes of files.h

	
1998-12-05  Alexander Larsson  <alla@lysator.liu.se>

	* dialog.dtd:
	Made the val property of string be implied.
	This makes it possible to save strings that
	are NULL. Just leave out val.

	* objects/lib/dia_xml.c:
	Fixed string so that it is possible to save strings
	that are NULL. Also made an ugly workaround of a
	bug in gnome-xml which removes empty properties.
	
	* objects/lib/orth_conn.c:
	Fixed a bug in saving. Forgot to step through the
	directions.
	
	* objects/UML/association.c: 
	* objects/UML/class.c: 
	* objects/UML/constraint.c: 
	* objects/UML/dependency.c: 
	* objects/UML/generalization.c: 
	* objects/UML/implements.c: 
	* objects/UML/large_package.c: 
	* objects/UML/note.c: 
	* objects/UML/small_package.c:
	* objects/UML/realizes.c:
	* objects/UML/usecase.c: 
	* objects/UML/actor.c: 
	Fixed UML objects to save as xml.
	The last two were done by asierra@servidor.unam.mx (asierra-981204)
	
	* objects/UML/uml.[ch]:
	Updated *_write() and *_read() functions to use xml.

	* objects/network/bus.c: 
	* objects/network/computer.c: 
	* objects/network/disc.c: 
	* objects/network/monitor.c:
	Updated network diagrams to use xml.

1998-12-02  Alexander Larsson  <alla@lysator.liu.se>

	* dialog.dtd:
	New file. DTD that describes the xml file format
	dia uses.

	* lib/dia_xml.[ch]:
	New files. Support for saving object to xml files.

	* configure.in:
	* app/Makefile.am:
	* lib/Makefile.am:
	Added check for and usage of gnome-xml library.

	* app/load_save.c:
	Major chages. Now saves/loads diagrams as xml.

	* lib/object.[ch]:
	* lib/element.[ch]:
	* lib/connection.[ch]:
	* lib/orth_conn.[ch]:
	* lib/render_object.[ch]:
	* lib/text.[ch]:
	Updated object support load/save functions for xml:

	* object/standard/arc.c:
	* object/standard/box.c:
	* object/standard/ellipse.c:
	* object/standard/line.c:
	* object/standard/textobj.c:
	* object/standard/zigzagline.c:
	Updated all standard objects to use xml.
	
	NOTE NOTE NOTE
	Only the standard objects are converted right now, don't
	save or load uml or network diagrams yet. Also, since this
	is new code it is deemed a bit unstable.
	
	* TODO
	Added a know bug.

1998-12-01  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/class.c:
	Changed classname font to Helvetica.
	Added more space above the classname

	* objects/UML/usecase.c:
	Correct placements of connectionpoints on ellipse.
	Better algorithm for deciding aspect ration on
	ellipse.

	These changes were made by Alejandro Aguilar Sierra
	<asierra@servidor.unam.mx>. (asierra-981201)

1998-11-30  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/actor.c:
	Changed the extents and alignment of the element
	and the text.

	* objects/UML/.cvsignore:
	Added usecase.lo and actor.lo.

1998-11-30  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/actor.c:
	* objects/UML/usecase.c:
	* objects/UML/pixmaps/actor.xpm:
	* objects/UML/pixmaps/case.xpm:
	New files. Implements usecase and actor UML objects.
	These objects are done by Alejandro Aguilar Sierra
	<asierra@servidor.unam.mx>.
	
	* objects/UML/Makefile.am:
	* objects/UML/pixmaps/Makefile.am:
	Added usecase and actor to makefile.
	
	* AUTHORS:
	Added Alejandro and Jerome to autors list.
	
1998-11-25  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/class.c (umlclass_load):
	Fixed typo. Reported by Jerome.Abela@solsoft.fr

1998-11-24  Alexander Larsson  <alla@lysator.liu.se>

	* app/properties.c:
	Update connections when doing apply in the properties window.

	* objects/UML/uml.[ch]:
	* objects/UML/class.[ch]:
	* objects/UML/class_dialog.c:
	Added connection points on both sides of attributes and
	operations in UML classes.
	Based on idea from Jerome.Abela@solsoft.fr
	
1998-11-24  Alexander Larsson  <alla@lysator.liu.se>

	* README:
	Some new documentation about handles and connectionpoints.
	
	* lib/object.[ch]:
	Added functions object_add_connectionpoint and
	object_remove_connectionpoint for handling a dynamic
	number of connectionpoints.

	* objects/UML/class.c:
	Only reserve space for stereotype when it is shown.

	These changes are from Jerome Abela <Jerome.Abela@solsoft.fr>

1998-11-08  Alexander Larsson  <alla@lysator.liu.se>

	* app/connectionpoint_ops.c:
	* app/commands.c:
	* app/disp_callbacks.c:
	* app/display.[ch]:
	* app/grid.c:
	* app/handle_ops.c:
	* app/magnify.c:
	* app/modify_tool.c:
	* app/render_gdk.[ch]:
	* lib/render.h:
	Huge cleanup of internal rendering system.
	Moved a lot of data (pixmap, width, height & gc) into the GdkRenderer.
	This gives a few new methods for Interactive Renderers for setting
	clipping regions and drawing pixel based lines and rects.
	Updated the rest of the code to use the new stuff.
	
	* app/render_eps.c:
	Fixed warning.

	* lib/widgets.c:
	* objects/standard/zigzagline.c
	Fixed unused variable warnings.

	* lib/font.c:
	Fixedbug with stringwidth where width==0.

	* TODO:
	Added known bug.

1998-11-02  Alexander Larsson  <alla@lysator.liu.se>

	* lib/widgets.[ch]:
	Added suppot for setting the font of a
	DiaFontSelector widget.
	Also fixed some typos in the header.

	* lib/object.h: 
	Added a comment about the GetPRoperties method call.
	You have to make sure to update widget state when
	this method is called. (Not all objects do this yet,
	to be fixed.)

	* TODO:
	Some small updates

1998-11-01  Alexander Larsson  <alla@lysator.liu.se>

	* lib/font.c
	Fixed problem with height of ascent and descent for fonts.
	It didn't use the whole height (==ascent+descent) when calculatine
	ascent_ratio and descent_ratio.

	* objects/standard/textobj.c:
	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/line.c:
	* objects/standard/arc.c:
	Updated and added property dialogs for these objects.
	Also added line width/color/style to those objects
	that didn't have it.
	This change breaks fileformat compatibility for these objects.
	
	* objects/standard/zigzagline.c:
	Changed zigzagline to be based on OrthConn, much nicer.
	Also added line style and color to properties.
	This change breaks fileformat compatibility for zigzagline.

	* lib/message.c:
	Fixed bug in message(). Forgot a pair of '&'.

1998-10-29  Alexander Larsson  <alla@lysator.liu.se>

	* lib/widgets.[ch]:
	Added DiaColorSelector widget.
	This is a colored button that pops up a color selection
	dialog when pressed.

1998-10-28  Alexander Larsson  <alla@lysator.liu.se>

	* lib/widgets.[ch]:
	* lib/Makefile.am:
	New files, added widgets for selecting fonts, alignment
	and line-style. Will be used later.

1998-10-12  Alexander Larsson  <alla@lysator.liu.se>

	* app/Makefile.am:
	* lib/Makefile.am:
	* objects/UML/Makefile.am:
	* objects/network/Makefile.am:
	* objects/standard/Makefile.am:
	Changed "CFLAGS = -Wall -g" to "CFLAGS = @CFLAGS@"
	in all Makefile.am.

1998-10-03  Alexander Larsson  <alla@lysator.liu.se>

	* app/handle_ops.c (handle_draw):
	connected HANDLE_MINOR_CONTROL also becomes red.

1998-10-02  Alexander Larsson  <alla@lysator.liu.se>

	* Makefile.am:
	removed -ldl from linking. This is added if needed by configure.

	* app/app_procs.c:
	Open dlls with RTLD_LAZY if it is defined.
	Some cleanups: char *error -> const char *error
	Added fprintf()'s to where we exited because of errors.

	* lib/files.c:
	Include <sys/types.h>

1998-10-01  Alexander Larsson  <alla@lysator.liu.se>

	* acconfig.h:
	* configure.in:
	* app/app_procs.c:
	Detect dlopen better.
	Detect wether dlopen needs an underscore in the identifier.
	This code was mostly borrowed from guile.

	* lib/sheet.[ch]:
	* app/app_procs.c:
	* objects/standard/standard.c:
	* objects/network/network.c:
	* objects/UML/uml.c:
	* most objects:
	Changed the way sheets reference objects to use just the
	name. Changed module loading to a two stage model:
	First register_objects() is called for all modules.
	Then register_sheets() is called. This means that
	sheets can safely include objects from other modules.
	

1998-09-30  Alexander Larsson  <alla@lysator.liu.se>

	* objects/network/bus.c:
	* objects/network/network.c:
	* objects/network/Makefile.am:
	New file bus.c. Added new object: Ethernet bus.

	* objects/standard/box.c:
	Added call to gtk_spin_button_set_numeric for linewidth spinner
	in property dialog.

1998-09-30  Alexander Larsson  <alla@lysator.liu.se>

	* app/connectionpoint_ops.c:
	* app/create_object.c:
	* app/group.c:
	* app/handle_ops.c:
	* app/modify_tool.c:
	* lib/connection.c:
	* lib/element.c:
	* lib/handle.h:
	* lib/object.c:
	* lib/orth_conn.c:
	* loads of objects:
	Changed handle->connectable to handle->connect_type.
	Now handles can be HANDLE_CONNECTABLE_NOBREAK, which means
	that their connections don't break when moving objects.

	* app/diagram.c:
	Always select the last handle in an object that has
	the closest distance.
	
	* lib/geometry.[ch]:
	Added rectangle_add_point function.
	

1998-09-27  Alexander Larsson  <alla@lysator.liu.se>

	* app/properties.[ch]: New files. Handles the new properties
	dialog.

	* app/modify_tool.c: Changed to use new properties dialog.

	* app/object_ops.[ch]: Removed object_changed_callback, as it's
	not needed anymore. This is now handled differently in
	properties.c

	* lib/object.[ch]:
	Changed the properties ops for objects. Removed typedefs
	ChangedObjectTime and ObjectChangedFunc needed for the old way.
	Added object_return_null function.
	
	* app/group.c:
	* lib/render_object.c:
	* objects/*/*.c:
	Changed objects to use the new properties dialog.
	

1998-09-14  Nuno Ferreira  <nmrf@rnl.ist.utl.pt>

	* */Makefile.am (INCLUDES): Changes to work with srcdir !=
	builddir.

	* autogen.sh: New file. Copied from gtk and added a call to
	libtoolize. Anyone knows why this isn't done in gtk?

	* Removed autogenerated files.

1998-09-12  Alexander Larsson  <alla@lysator.liu.se>

	* Added call setlocale(LC_NUMERIC, "C") so that formating of
	  floating-point numbers in postscript output will be correct.
	* Did some cleanup of generated postscript files. 
